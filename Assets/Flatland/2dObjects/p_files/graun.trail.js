(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{100:function(t,e,n){"use strict";n.d(e,"b",function(){return d}),n.d(e,"a",function(){return l});var i=n(5),a=n(0),o=n(16),s=n.n(o),r=n(52),c=function(t,e){return"".concat(t,":").concat(e)},l=function(t){var e=a.a.get("googleAnalytics.trackers.editorial"),n={play:"metric1",skip:"metric2",25:"metric3",50:"metric4",75:"metric5",end:"metric6"},o=function(t){var e={video:{id:"gu-video-youtube-".concat(t.mediaId),eventType:"video:content:".concat(t.eventType)}};s.a.record(e)};["play","25","50","75","end"].forEach(function(a){i.a.once(c(a,t),function(i){var s={mediaId:t,mediaType:"video",eventType:a,isPreroll:!1};o(s),window.ga("".concat(e,".send"),"event",Object(r.a)(s,n,i,"gu-video-youtube",function(){return"video content"},t))})}),o({mediaId:t,mediaType:"video",eventType:"ready",isPreroll:!1})},d=function(t,e){i.a.emit(c(t,e),e)}},134:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o});var i=n(51),a=function(t){Object.keys(t).forEach(function(e){i.a.set("".concat("accessibility",".").concat(e),t[e])})},o=function(t){return!0===function(t){return!1!==i.a.get("".concat("accessibility",".").concat(t))}(t)}},138:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(4),a=n.n(i),o=n(0),s=n(135),r=n(121),c=new Promise(function(t){window.YT&&window.YT.Player?t():window.onYouTubeIframeAPIReady=t}),l=function(t){t&&t.classList.add("youtube__video-started")},d=function(t){return document.getElementById("youtube-".concat(t))},u=function(t,e,n,i){return Object(s.a)("https://www.youtube.com/iframe_api",{}),c.then(function(){return function(t,e,n,i,a,s){var c=!1!==Object(r.b)(r.e),l=!o.a.get("switches.youtubeRelatedVideos");return new window.YT.Player(t,{videoId:e,width:"100%",height:"100%",events:{onReady:i,onStateChange:a,onError:function(t){console.error("YOUTUBE: ".concat(t))}},embedConfig:{relatedChannels:[],disableRelatedVideos:l,adsConfig:{nonPersonalizedAd:!c}}})}(t.id,n,0,function(t){var i=d(n);(function(t){return t.target.getCurrentTime()>0})(t)&&l(i),function(t,e,n){a.a.write(function(){n&&n.classList.add("youtube__video-ready")}),e&&"function"==typeof e.onPlayerReady&&e.onPlayerReady(t)}(t,e,i)},function(t){!function(t,e,n){if(n&&o.a.get("page.isDev")){var i=window.YT.PlayerState,s=Object.keys(i).find(function(e){return i[e]===t.data});s&&console.log("Player ".concat(n.id," is ").concat(s))}a.a.write(function(){["ENDED","PLAYING","PAUSED","BUFFERING","CUED"].forEach(function(e){n&&(n.classList.toggle("youtube__video-".concat(e.toLocaleLowerCase()),t.data===window.YT.PlayerState[e]),l(n))})}),e&&"function"==typeof e.onPlayerStateChange&&e.onPlayerStateChange(t)}(t,e,d(n))})})}},142:function(t,e,n){"use strict";n.d(e,"a",function(){return T}),n.d(e,"b",function(){return O});var i=n(6),a=(n(2),n(7)),o=n(14),s=n(138),r=n(100),c=n(30),l=n(12),d=n(0),u=n(10),h=n(31),f=n.n(h),g=n(134),p=n(28),m={},v=[];document.addEventListener("focusout",function(){v.forEach(function(t){i.a.read(function(){if(document.activeElement===t)return Object(l.a)(".vjs-big-play-button",t.parentElement)}).then(function(t){i.a.write(function(){t&&t.addClass("youtube-play-btn-focussed")})})})}),document.addEventListener("focusin",function(){i.a.read(function(){return Object(l.a)(".vjs-big-play-button")}).then(function(t){i.a.write(function(){t&&t.removeClass("youtube-play-btn-focussed")})})});var b=function(t){m[t].progressTracker&&clearInterval(m[t].progressTracker)},y=function(t,e){var n=e.trackingId,i=e.iframe,a=e.overlay,o=e.endSlate,s=e.paused;b(t),function(t){m[t].progressTracker=setInterval(function(t){var e=m[t];if(e){var n=e.pendingTrackingCalls,i=e.youtubePlayer,a=e.duration,o=e.trackingId;if(n.length){var s=i.getCurrentTime();if(a){var c=Math.round(s/a*100);n.length&&c>=n[0]&&(Object(r.b)(n[0].toString(),o),n.shift())}}}}.bind(null,t),1e3),m[t].progressTracker}(t),s?e.paused=!1:Object(r.b)("play",n);var c=i.closest(".immersive-main-media");if(c&&c.classList.add("atom-playing"),a&&o&&!o.rendered){var l=a.parentElement;l&&o.fetch(l,"html")}},w=function(t){var e=t.split("?");return 1===e.length?"":Object(p.d)(e[1]).v||""},x={ENDED:function(t){var e=m[t];b(t),Object(r.b)("end",e.trackingId),e.pendingTrackingCalls=[25,50,75];var n=e.iframe&&e.iframe.closest(".immersive-main-media")||null;n&&n.classList.remove("atom-playing")},PLAYING:function(t){var e=m[t];if(e){var n=m[t],i=n.youtubePlayer,s=n.youtubeId,c=w(i.getVideoUrl());s!==c?Object(a.a)("/atom/youtube/".concat(c,".json")).then(function(n){var a=n.atomId;a&&(e.trackingId=a,e.youtubeId=c,e.duration=i.getDuration(),Object(r.a)(a),y(t,e))}).catch(function(t){Object(o.a)(Error("Failed to get atom ID for youtube ID ".concat(c,". ").concat(t)),{feature:"youtube"},!1)}):y(t,e)}},PAUSED:function(t){m[t].paused=!0,b(t)}},j=function(){var t=document.querySelector(".immersive-main-media__media .youtube-media-atom"),e=t?t.offsetHeight:0,n=document.querySelector(".immersive-main-media__headline-container"),i=e-(n?n.offsetHeight:0),a=document.querySelector(".youtube-media-atom__immersive-interface");a&&(a.style.top="".concat(i,"px"))},_=function(t,e,n,i,a){var o=document.getElementById(n);if(o){v.push(o);var s=a.target,r=w(s.getVideoUrl()),l=s.getDuration();if(m[e]={iframe:o,trackingId:t,youtubeId:r,duration:l,youtubePlayer:s,paused:!1,pendingTrackingCalls:[25,50,75]},function(t){return("video"===d.a.get("page.contentType","").toLowerCase()&&(d.a.get("page.isDev")?0===document.referrer.indexOf(window.location.origin):0===document.referrer.indexOf(d.a.get("page.host")))&&(m[t].iframe&&!!m[t].iframe.closest('figure[data-component="main video"]')||!1)||d.a.get("page.isFront"))&&!(Object(u.o)()||Object(u.l)())&&Object(g.a)("flashing-elements")}(e)&&a.target.playVideo(),i&&(m[e].overlay=i,d.a.get("page.section")&&!d.a.get("switches.youtubeRelatedVideos")&&Object(u.m)({min:"desktop"}))){var h=function(t){var e=t.parentNode;if(e instanceof HTMLElement){var n=(e.dataset||{}).endSlate;if(n){var i=new c.a;return i.endpoint=n,i}}}(i);h&&(m[e].endSlate=h)}o.closest(".immersive-main-media__media")&&(j(),window.addEventListener("resize",f()(j.bind(null),200)))}},k=function(t){i.a.read(function(){if(t){var e=t.querySelector(".youtube-media-atom__iframe");if(e){var n=e.id,i=t.getAttribute("data-media-atom-id")||"",a="".concat(i,"/").concat(Math.random().toString(36).substr(2,9));t.setAttribute("data-unique-atom-id",a);var o=t.querySelector(".youtube-media-atom__overlay"),c=t.getAttribute("data-channel-id")||"";Object(r.a)(i),Object(s.a)(e,{onPlayerReady:function(t){_(i,a,n,o,t)},onPlayerStateChange:function(t){!function(t,e){var n=e.data,i=Object.keys(x).find(function(t){return n===window.YT.PlayerState[t]});i&&x[i](t)}(a,t)}},e.dataset.assetId,c)}}})},C=function(t){t&&i.a.read(function(){Object(l.a)(".youtube-media-atom:not(.no-player)",t).each(function(t){var e=t.querySelector(".youtube-media-atom__overlay");d.a.get("page.isFront")?e.addEventListener("click",function(){k(t)}):k(t)})})},T=function(t){t&&t.length?t.forEach(C):C(document.body)},O=function(t){var e=m[t];e&&e.youtubePlayer.pauseVideo()}},288:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n(9),a=n.n(i),o=n(1),s=n.n(o),r=n(0),c=n(10),l=n(103),d=n(36),u=n(51),h=new function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a;a()(this,t),s()(this,"dfpAdvertising",void 0),s()(this,"stickyTopBannerAd",void 0),s()(this,"articleBodyAdverts",void 0),s()(this,"articleAsideAdverts",void 0),s()(this,"carrotTrafficDriver",void 0),s()(this,"videoPreRolls",void 0),s()(this,"highMerch",void 0),s()(this,"thirdPartyTags",void 0),s()(this,"outbrain",void 0),s()(this,"commentAdverts",void 0),s()(this,"liveblogAdverts",void 0),s()(this,"paidforBand",void 0),s()(this,"asynchronous",void 0),s()(this,"adFree",void 0);var n=/[#&]noads(&.*)?$/.test(window.location.hash),i=/[#&]noadsaf(&.*)?$/.test(window.location.hash),o=/[?&]forceads(&.*)?$/.test(window.location.search),h=!n&&!u.a.isOff("adverts"),f=e.get("page.shouldHideAdverts")||"childrens-books-site"===e.get("page.section"),g=e.get("page.isMinuteArticle"),p="Article"===e.get("page.contentType"),m="Interactive"===e.get("page.contentType"),v=e.get("page.isLiveBlog"),b=e.get("page.isHosted"),y="Identity"===e.get("page.contentType")||"identity"===e.get("page.section"),w=e.get("switches"),x="wide"===Object(c.d)(),j=document.documentElement&&document.documentElement.classList.contains("has-sticky"),_=e.get("page.showNewRecipeDesign")&&e.get("tests.abNewRecipeDesign"),k=e.get("page.pageId","").includes("help/ng-interactive/2017/mar/17/contact-the-guardian-securely");this.adFree=!!i||Object(l.d)(),this.dfpAdvertising=o||w.commercial&&h&&!f&&!y,this.stickyTopBannerAd=!this.adFree&&!e.page.disableStickyTopBanner&&!j,this.articleBodyAdverts=this.dfpAdvertising&&!this.adFree&&!g&&p&&!v&&!b&&!_,this.carrotTrafficDriver=!this.adFree&&this.articleBodyAdverts&&e.get("switches.carrotTrafficDriver",!1)&&!e.get("page.isPaidContent"),this.videoPreRolls=this.dfpAdvertising&&!this.adFree,this.highMerch=this.dfpAdvertising&&!this.adFree&&!g&&!b&&!m&&!e.get("page.isFront")&&!_,this.thirdPartyTags=h&&!y&&!k,this.outbrain=this.dfpAdvertising&&!this.adFree&&w.outbrain&&!n&&!f&&p&&!e.get("page.isPreview")&&e.get("page.showRelatedContent")&&!(Object(d.m)()&&e.get("page.commentable")),this.commentAdverts=this.dfpAdvertising&&!this.adFree&&!g&&e.get("switches.enableDiscussionSwitch")&&e.get("page.commentable")&&(!v||x),this.liveblogAdverts=v&&this.dfpAdvertising&&!this.adFree,this.paidforBand=e.get("page.isPaidContent")&&!j}},322:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n(9),a=n.n(i),o=n(15),s=n.n(o),r=n(1),c=n.n(r),l=n(5),d=n(4),u=n.n(d),h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a()(this,t),c()(this,"element",void 0),c()(this,"opts",void 0),c()(this,"offsetFromParent",void 0),c()(this,"lastMessage",void 0),this.element=e,this.opts=Object.assign({},{top:0,containInParent:!0,emitMessage:!1},n)}return s()(t,[{key:"init",value:function(){var t=this,e=this.element.parentElement;e&&(u.a.read(function(){t.offsetFromParent=t.element.getBoundingClientRect().top-e.getBoundingClientRect().top},this),l.a.on("window:throttledScroll",this.updatePosition.bind(this)),u.a.read(this.updatePosition,this))}},{key:"updatePosition",value:function(){var t=this,e=this.element.parentElement;if(e){var n,i,a,o=this.element.getBoundingClientRect(),s=e.getBoundingClientRect(),r=o.height;if(s.top+this.offsetFromParent>0)a=!1,n={top:""},i="unfixed";else{a=!0;var c=this.opts.containInParent&&s.bottom<=o.height?Math.floor(s.bottom-r-this.opts.top):this.opts.top;n={top:"".concat(c,"px")},i="fixed"}this.opts.emitMessage&&i&&i!==this.lastMessage&&(this.emitMessage(i),this.lastMessage=i),n&&u.a.write(function(){a?t.element.classList.add("is-sticky"):t.element.classList.remove("is-sticky"),Object.assign(t.element.style,n)},this)}}},{key:"emitMessage",value:function(t){l.a.emit("modules:".concat(this.element.id,":").concat(t))}}]),t}()},335:function(t,e,n){"use strict";n.r(e);var i,a,o=n(6),s=n(18),r=n.n(s),c=n(12),l=n(0),d=n(120),u=n(327),h=n(420),f=n(36),g=n(409),p=n(9),m=n.n(p),v=n(15),b=n.n(v),y=n(49),w=n.n(y),x=n(48),j=n.n(x),_=n(50),k=n.n(_),C=n(30),T=n(5),O=function(t){function e(){var t;m()(this,e),t=w()(this,j()(e).call(this));var n=l.a.get("page.section"),i=n&&!["info","global"].includes(n);return t.endpoint="/most-read".concat(i?"/".concat(n):"",".json"),T.a.emit("register:begin","popular-in-section"),t.fetch(r()(".js-popular-trails"),"html"),t}return k()(e,t),b()(e,[{key:"ready",value:function(){T.a.emit("modules:popular:loaded"),T.a.emit("register:end","popular-in-section")}}]),e}(C.a),E=n(25),S=n.n(E),I=n(7),P=n(300),A=n(1),L=n.n(A),$=function(){function t(e){m()(this,t),L()(this,"opts",void 0),L()(this,"dom",void 0),L()(this,"cta",void 0),L()(this,"expanded",void 0),L()(this,"showCount",void 0),this.opts=e,this.dom=e.dom,this.expanded=!1!==e.expanded,this.cta=document.createElement("button"),this.showCount=!1!==e.showCount}return b()(t,[{key:"renderState",value:function(){this.expanded?this.dom.classList.remove("shut"):this.dom.classList.add("shut")}},{key:"getCount",value:function(){return parseInt(this.dom.getAttribute("data-count")||"0",10)}},{key:"updateCallToAction",value:function(){var t="Show ".concat(this.showCount?"".concat(this.getCount()," "):"").concat(this.expanded?"fewer":"more");this.cta.innerHTML=t,this.cta.setAttribute("data-link-name","Show ".concat(this.expanded?"more":"fewer")),this.cta.setAttribute("data-is-ajax","1")}},{key:"toggleExpanded",value:function(){this.expanded=!this.expanded,this.renderState(),this.updateCallToAction()}},{key:"isOpen",value:function(){return!this.dom.classList.contains("shut")}},{key:"renderCallToAction",value:function(){var t=this;this.cta.addEventListener("click",function(){t.toggleExpanded()}),this.cta.className="cta",this.opts.buttonAfterEl?this.opts.buttonAfterEl.insertAdjacentElement("afterend",this.cta):this.dom.appendChild(this.cta),this.updateCallToAction()}},{key:"scrollToCallToAction",value:function(){var t=this;this.expanded||window.setTimeout(function(){t.cta.scrollIntoView()},550)}},{key:"init",value:function(){this.dom.classList.contains("expandable-initialised")||!this.dom.innerHTML||this.getCount()<3||(this.dom.classList.add("expandable-initialised"),this.renderCallToAction(),this.renderState())}},{key:"toggle",value:function(){this.toggleExpanded()}}]),t}(),B=n(288),q=function(t){new $({dom:t,expanded:!1,showCount:!1}).init()},R=n(26),M=n.n(R),D={uk:{comment:"uk-alpha/contributors/feature-stories"},us:{comment:"us-alpha/contributors/feature-stories"},au:{comment:"au-alpha/contributors/feature-stories"},int:{comment:"ee3386bb-9430-4a6d-8bca-b99d65790f3b"}},z=function(t){function e(){var t;return m()(this,e),t=w()(this,j()(e).call(this)),L()(M()(M()(t)),"edition",void 0),Object(P.a)("tonal-content"),t.edition=l.a.get("page.edition","").toLowerCase(),t.isSupported()&&(t.endpoint=t.getEndpoint()),t}return k()(e,t),b()(e,null,[{key:"getTone",value:function(){return l.a.get("page.tones","").split(",")[0].toLowerCase()}},{key:"ready",value:function(){T.a.emit("modules:tonal:loaded"),Object(P.b)("tonal-content")}},{key:"error",value:function(){Object(P.c)("tonal-content")}}]),b()(e,[{key:"getEndpoint",value:function(){var t=D[this.edition][e.getTone()];return"/container/".concat(t,".json")}},{key:"isSupported",value:function(){return e.getTone()in D[this.edition]}}]),e}(C.a),U=n(4),H=n.n(U),F=n(14),N=n(355),J=n(133),V=n.n(J),Y=n(137),W=n(521),G=n.n(W),K=n(522),Q=n.n(K),X=Object(c.a)(".js-sharecount"),Z={facebook:"n/a"},tt=0,et=function(){var t="".concat(l.a.page.ajaxUrl,"/sharecount/").concat(l.a.page.pageId,".json");Object(I.a)(t,{mode:"cors"}).then(function(t){var e=t.share_count||0;Z.facebook=e,function(t){var e=Object(Y.a)("share"),n=X.hasClass("js-sharecount-immersive")?Q.a:G.a,o=V()(n)({icon:e});X.removeClass("u-h").html(o).css("display",""),a=Object(c.a)(".sharecount__value--short",X[0]),i=Object(c.a)(".sharecount__value--full",X[0]),function(t){if(0!==t){var e=parseInt((tt+=t).toFixed(0),10),n=Object(N.a)(e),o=e>1e4?"".concat(Math.round(e/1e3),"k"):e;H.a.write(function(){i.text(n),a.text(o)})}}(t)}(e),X.attr("title",V()("Facebook: <%=facebook%>")(Z))})},nt=function(){if(l.a.switches.serverShareCounts&&X.length&&!l.a.page.isPreview)try{et()}catch(t){Object(F.a)(new Error("Error retrieving share counts (".concat(t.message,")")),{feature:"share-count"},!1)}},it=n(11),at=n.n(it),ot=function(t,e,n,i){var a=new C.a;return a.manipulationType=n,a.endpoint=e+(i?"?page=".concat(i):""),t.innerHTML="",a.fetch(t,"html")},st=n(142);n.d(e,"initTrails",function(){return gt});var rt=function(){var t=l.a.get("page",{}),e=t.showRelatedContent,n=t.isPaidContent,i=t.section,a=t.shortUrl,o=t.seriesId;"Audio"!==l.a.get("page.contentType")&&"Video"!==l.a.get("page.contentType")||!e||n||!i||function(t,e,n,i,a){var o=new C.a,s=a?"/".concat(a):"",r="video"===e?"&exclude-tag=guardian-professional/guardian-professional":"",c="/".concat(e,"/section/").concat(n).concat(s,".json?shortUrl=").concat(i).concat(r);o.endpoint=c,o.fetch(t).then(function(){Object(st.a)([t]),T.a.emit("page:media:moreinloaded",t)})}(Object(c.a)(".js-more-in-section")[0],l.a.get("page.contentType","").toLowerCase(),i,a,o)},ct=function(t,e){window.location.hash?e():o.a.read(function(){return document.querySelector(t)}).then(function(t){t&&Object(u.a)(t,1500,e)})},lt=function(){l.a.get("page.isFront")||ct(".js-popular-trails",function(){new O})},dt=function(){l.a.get("page.seriesId")||l.a.get("page.blogIds")||ct(".js-related",function(){var t={excludeTags:[]};"paid-content"!==l.a.get("page.sponsorshipType")&&t.excludeTags.push("tone/advertisement-features"),"contentType"in l.a.get("page")&&["video","interactive"].includes(l.a.get("page.contentType","").toLowerCase())&&t.excludeTags.push("guardian-professional/guardian-professional"),function(t){var e,n,i,a=B.a.adFree&&l.a.get("page.isPaidContent");if(l.a.get("page.hasStoryPackage")){var s=document.body&&document.body.querySelector(".related-trails");s&&q(s)}else if(l.a.get("switches.relatedContent")&&l.a.get("page.showRelatedContent")&&!a){var r=document.body&&document.body.querySelector(".js-related");if(r&&!r.classList.contains("lazyloaded")){n=function(){if(!l.a.get("page.keywordIds"))return!1;var t,e,n=l.a.get("page.keywordIds","").split(","),i=l.a.get("page.isPaidContent")?n:(t=["sport/cricket","sport/rugby-union","sport/rugbyleague","sport/formulaone","sport/tennis","sport/cycling","sport/motorsports","sport/golf","sport/horse-racing","sport/boxing","sport/us-sport","sport/australia-sport","football/championsleague","football/premierleague","football/championship","football/europeanfootball","football/world-cup-2014","football/manchester-united","football/chelsea","football/arsenal","football/manchestercity","football/tottenham-hotspur","football/liverpool"],e=n,S()(new Set(t)).filter(function(t){return new Set(e).has(t)}));return i.length?"/popular-in-tag/".concat(i[0],".json"):void 0}(),i=n?"related-popular-in-tag":"related-content",Object(P.a)(i),r.setAttribute("data-component",i),e=n||"/related/".concat(l.a.get("page.pageId"),".json");var c=t.excludeTags.map(function(t){return"exclude-tag=".concat(t)});t.excludeTags&&t.excludeTags.length&&(e+="?".concat(c.join("&"))),Object(I.a)(e,{mode:"cors"}).then(function(t){return o.a.write(function(){r.innerHTML=t.html,r.classList.add("lazyloaded")})}).then(function(){var t=r.querySelector(".related-content");t&&q(t),T.a.emit("modules:related:loaded",r),Object(P.b)(i)}).catch(function(){r.remove(),Object(P.c)(i)})}}else Array.from(document.querySelectorAll(".js-related")).forEach(function(t){return t.classList.add("u-h")})}(t)})},ut=function(){ct(".js-onward",function(){(l.a.get("page.seriesId")||l.a.get("page.blogIds"))&&l.a.get("page.showRelatedContent")?new g.a(r()(".js-onward")):""!==l.a.get("page.tones","")&&o.a.read(function(){return Array.from(document.querySelectorAll(".js-onward"))}).then(function(t){t.forEach(function(t){(new z).fetch(t,"html")})})}),function(){var t=l.a.get("page.contentType","");if("Audio"===t||"Video"===t){var e=t.toLowerCase();Object(c.a)("video"===e?".js-video-components-container":".js-media-popular").each(function(t){!function(t,e){var n="video"===e?"append":"html",i=function(t){return Boolean(l.a.page.seriesTags)?"/video/in-series/".concat(l.a.page.seriesId,".json"):"/".concat(l.a.page.isPodcast?"podcast":t,"/most-viewed.json")}(e);ot(t,i,n).then(function(){!function(t,e,n){at.a.on(t,"click",".most-viewed-navigation__button",function(i){var a=i.target.getAttribute("data-page");return ot(t,n,e,a),i.preventDefault(),!1})}(t,n,i)})}(t,e)})}}(),"Audio"===l.a.get("page.contentType")&&Object(c.a)(".js-audio-components-container").each(function(t){return function(t){l.a.page.seriesId&&function(t,e,n){var i=new C.a;i.manipulationType="append",i.endpoint="".concat(e,"?shortUrl=").concat(l.a.page.shortUrl),t.innerHTML="",i.fetch(t,"html")}(t,"/audio/series/".concat(l.a.page.seriesId,".json"))}(t)})},ht=function(){l.a.get("switches.enableDiscussionSwitch")&&l.a.get("page.commentable")&&o.a.read(function(){return document.querySelector(".discussion")}).then(function(t){t&&(new h.a).attachTo(t)})},ft=function(){Object(f.m)()||o.a.read(function(){return Object(c.a)(".js-comments")}).then(function(t){return o.a.write(function(){if(t.appendTo(r()(".js-repositioned-comments")),"#comments"===window.location.hash){var e=t.offset().top;Object(c.a)(document.body).scrollTop(e)}})})},gt=function(){Object(d.b)([["c-discussion",ht],["c-comments",ft],["c-shares",nt],["c-popular",lt],["c-related",dt],["c-onward",ut],["c-more-in-section",rt]])}},352:function(t,e,n){"use strict";n.d(e,"a",function(){return _});var i=n(9),a=n.n(i),o=n(49),s=n.n(o),r=n(48),c=n.n(r),l=n(15),d=n.n(l),u=n(50),h=n.n(u),f=n(18),g=n.n(f),p=n(6),m=n(30),v=n(5),b=n(289),y=n.n(b),w=new Promise(function(t,e){v.a.on("modules:onward:geo-most-popular:ready",t),v.a.on("modules:onward:geo-most-popular:cancel",t),v.a.on("modules:onward:geo-most-popular:error",e)}),x=function(t){function e(){var t;return a()(this,e),(t=s()(this,c()(e).call(this))).endpoint="/most-read-geo.json",v.a.emit("register:begin","geo-most-popular"),t}return h()(e,t),d()(e,null,[{key:"error",value:function(t){v.a.emit("modules:onward:geo-most-popular:error",t)}}]),d()(e,[{key:"ready",value:function(){v.a.emit("register:end","geo-most-popular"),v.a.emit("modules:onward:geo-most-popular:ready",this)}}]),e}(m.a),j=function(t){t>1500&&(new x).fetch(g()(".js-components-container"),"rightHtml")},_={render:y()(function(){return p.a.read(function(){var t=document.querySelector(".js-article__body");return t?t.getBoundingClientRect()&&t.getBoundingClientRect().height:0}).then(j),w}),whenRendered:w}},356:function(t,e,n){"use strict";var i=n(9),a=n.n(i),o=n(15),s=n.n(o),r=n(1),c=n.n(r),l=n(143),d=function(){function t(e){a()(this,t),c()(this,"context",void 0),c()(this,"states",void 0),c()(this,"debug",void 0),c()(this,"onChangeState",void 0),this.context=e.context,this.states=e.states||{},this.context.state=e.initial||"",this.debug=e.debug||!1,this.onChangeState=e.onChangeState.bind(this.context)||function(){}}return s()(t,[{key:"log",value:function(){var t;this.debug&&window.console&&window.console.log&&(t=window.console).log.apply(t,arguments)}},{key:"trigger",value:function(t,e){this.log("fsm: (event)",t);var n=this.context.state;(this.states[n].events[t]||l.a).call(this.context,e),(n!==this.context.state||this.context.reloadState)&&(this.context.reloadState=!1,this.onChangeState(n,this.context.state),(this.states[n].leave||l.a).apply(this.context),(this.states[this.context.state].enter||l.a).apply(this.context),this.log("fsm: (state)","".concat(n," -> ").concat(this.context.state)))}}]),t}();e.a=d},357:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(4),a=n.n(i),o=n(134),s=function(t){Object(o.a)("flashing-elements")?t&&t():a.a.write(function(){document.body&&document.body.classList.add("disable-flashing-elements"),t&&t()})}},370:function(t,e,n){"use strict";var i,a,o=n(519),s=n.n(o),r=n(12),c=n(120),l=n(357),d=n(408),u=n(6),h=function(){u.a.read(function(){return{lastModifiedElm:document.querySelector(".js-lm"),webPublicationDateElm:document.querySelector(".js-wpd")}}).then(function(t){var e=t.lastModifiedElm,n=t.webPublicationDateElm;e&&n&&(u.a.write(function(){n.classList.add("content__dateline-wpd--modified")}),n.addEventListener("click",function(){u.a.write(function(){e.classList.toggle("u-h")})}))})},f=n(11),g=n.n(f),p=n(520),m=n.n(p),v=n(0),b=n(10),y=n(5),w=n(137),x=n(31),j=n.n(x),_=Object(w.a)("shareTwitter",["icon","centered-icon"]),k=Object(w.a)("shareEmail",["icon","centered-icon"]),C='\n    <div class="selection-sharing">\n        <ul class="social u-unstyled u-cf" data-component="social-selection">\n            <li class="social__item" data-link-name="twitter">\n                <a  class="rounded-icon social-icon social-icon--twitter js-selection-twitter"\n                    data-link-name="social-selection"\n                    target="_blank"\n                    href="#">\n                    <span class="u-h">Share on Twitter</span>\n                    '.concat(_,'\n                </a>\n            </li>\n            <li class="social__item" data-link-name="email">\n                <a  class="rounded-icon social-icon social-icon--email js-selection-email"\n                    data-link-name="social-selection"\n                    target="_blank"\n                    href="#">\n                    <span class="u-h">Share via Email</span>\n                    ').concat(k,"\n                </a>\n            </li>\n        </ul>\n    </div>\n"),T=r.a.create(C),O=["js-article__body","content__standfirst","block","caption--main","content__headline"],E=function(){T.hasClass("selection-sharing--active")&&T.removeClass("selection-sharing--active")},S=function(){var t=window.getSelection&&document.createRange&&window.getSelection(),e=document.body;if(e&&t&&t.rangeCount>0&&t.toString()){var n=t.getRangeAt(0),o=m.a.getBoundingClientRect(n);if(!o)return;var s=Object(r.a)(e).scrollTop()+o.top,c=n.toString();if(!function(t){return O.some(function(e){return r.a.ancestor(t.startContainer,e)&&r.a.ancestor(t.endContainer,e)})}(n))return void E();c.length>252&&(c="".concat(c.slice(0,251),"â€¦"));var l=encodeURIComponent(c),d="".concat(v.a.page.shortUrl,"/stw"),u=encodeURI(d),h="https://twitter.com/intent/tweet?text=%E2%80%9C".concat(l,"%E2%80%9D&url=").concat(u),f=encodeURI(v.a.page.webTitle),g=encodeURI(n.toString()),p="".concat(v.a.get("page.shortUrl"),"/sbl"),b=encodeURI(p),y="mailto:?subject=".concat(f,"&body=%E2%80%9C").concat(g,"%E2%80%9D ").concat(b);i.attr("href",h),a.attr("href",y),T.css({top:"".concat(s,"px"),left:"".concat(o.left,"px")}),T.hasClass("selection-sharing--active")||T.addClass("selection-sharing--active")}else E()},I=function(t){t.target.closest(".social__item")||E()},P=function(){document.body&&!Object(b.j)()&&(document.body.appendChild(T[0]),i=Object(r.a)(".js-selection-twitter"),a=Object(r.a)(".js-selection-email"),g.a.on(document.body,"keypress keydown keyup",j()(S,50)),g.a.on(document.body,"mouseup",j()(S,200)),g.a.on(document.body,"mousedown",j()(I,50)),y.a.on("window:throttledResize",S))};n.d(e,"a",function(){return $});var A=function(){Object(r.a)(".fenced").each(s.a.render)},L=function(){Object(d.b)(),Object(d.a)()},$=function(){Object(c.b)([["trail-a11y",l.a],["trail-fence",A],["trail-twitter",L],["trail-sharing",P],["trail-last-modified",h]])}},407:function(t,e,n){"use strict";n.d(e,"b",function(){return v}),n.d(e,"a",function(){return m});var i=n(25),a=n.n(i),o=n(6),s=n(0),r=n(10),c=n(7),l=n(5),d=n(14),u=n(314),h=n(288),f=function(t,e){return o.a.write(function(){t.innerHTML=e.html,t.classList.remove("element-rich-link--not-upgraded"),t.classList.add("element-rich-link--upgraded"),Array.from(document.getElementsByClassName("submeta-container--break")).forEach(function(t){t.classList.remove("submeta-container--break")}),l.a.emit("rich-link:loaded",t)})},g=function(t){var e=t.querySelector("a");if(!e)return Promise.resolve();var n=e.href,i=s.a.get("page.host"),l=n.split(i),u=Object(r.m)({max:"mobileLandscape"});return l&&l[1]?Object(c.a)("/embed/card".concat(l[1],".json"),{mode:"cors"}).then(function(e){e.html&&(u?function(t){return o.a.read(function(){var e=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement&&document.documentElement.clientHeight||0;return e.top>n})}(t).then(function(n){n&&f(t,e)}):f(t,e),function(t){h.a.adFree?o.a.write(function(){a()(t.children).filter(function(t){return t.classList.toString().includes("rich-link--paidfor")}).forEach(function(t){return t.classList.add("u-h")})}):Promise.resolve()}(t))}).catch(function(t){Object(d.a)(t,{feature:"rich-links"})}):Promise.resolve()},p=function(t){return t.includes(s.a.get("page.richLink"))},m=function(){var t,e=Array.from(document.querySelectorAll(".element-rich-link a")).map(function(t){return t.href}).some(p),n=s.a.get("page.shouldHideAdverts")||!s.a.get("page.showRelatedContent");return!s.a.get("page.richLink")||s.a.get("page.richLink").includes(s.a.get("page.pageId"))||n||e?Promise.resolve():u.a.fillSpace({bodySelector:".js-article__body",slotSelector:" > p",minAbove:200,minBelow:250,clearContentMeta:50,selectors:{" > h2":{minAbove:"mobile"===Object(r.d)()?20:0,minBelow:200}," > *:not(p):not(h2):not(blockquote)":{minAbove:35,minBelow:300}," .ad-slot":{minAbove:150,minBelow:200}," .element-rich-link":{minAbove:500,minBelow:500}," .element--showcase":{minAbove:["desktop","leftCol","wide"].includes(Object(r.d)())?200:0,minBelow:0}}},function(e){var n,i,a=(n={href:s.a.get("page.richLink")},'<aside class=" element element-rich-link element-rich-link--tag\n                    element--thumbnail element-rich-link--not-upgraded"\n            data-component="rich-link-tag"\n            data-link-name="rich-link-tag"\n            >\n        <p><a href="'.concat(i=n.href,'">').concat(i,"</a></p>\n    </aside>"));return e[0].insertAdjacentHTML("beforebegin",a),t=e[0].previousElementSibling}).then(function(e){if(e&&t)return g(t)})},v=function(){Array.from(document.getElementsByClassName("element-rich-link--not-upgraded")).forEach(g)}},408:function(t,e,n){"use strict";n.d(e,"b",function(){return h}),n.d(e,"a",function(){return u});var i=n(4),a=n.n(i),o=n(0),s=n(10),r=n(5),c=n(31),l=n.n(c),d=document.querySelector(".js-liveblog-body, .js-article__body, .js-article__body--minute-article"),u=function(){if(("mobile"!==Object(s.d)()||o.a.get("page.isMinuteArticle"))&&o.a.get("switches.enhanceTweets")){var t=Array.from(document.querySelectorAll("blockquote.js-tweet")),e=Object(s.g)().height;t.forEach(function(t){var n=t.getBoundingClientRect();2.5*e>n.top&&n.top+n.height>0&&a.a.write(function(){t.classList.remove("js-tweet"),t.classList.add("twitter-tweet"),function(){var t=Array.from(document.querySelectorAll("blockquote.twitter-tweet")),e=document.getElementById("twitter-widget");if(t.length){if(!e){var n=document.createElement("script"),i=document.scripts[0];n.id="twitter-widget",n.async=!0,n.src="//platform.twitter.com/widgets.js",i&&i.parentNode&&i.parentNode.insertBefore(n,i)}"undefined"!=typeof twttr&&twttr.widgets&&twttr.widgets.load&&twttr.widgets.load(d)}}()})})}},h=function(){r.a.on("window:throttledScroll",l()(u,200))}},52:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a});var i=function(t,e,n,i,a,o){var s=i,r={eventCategory:"media",eventAction:a(t),eventLabel:n,dimension19:o,dimension20:s},c=e[t.eventType];return c&&(r[c]=1),r},a=function(t){var e="".concat(t.mediaType," ");return t.isPreroll?e+="preroll":e+="content",e}},521:function(t,e){t.exports='<div class="sharecount__heading"><%=icon%><span class="sharecount__text u-h">Shares</span></div>\n<div class="sharecount__value sharecount__value--full">0</div>\n<div class="sharecount__value sharecount__value--short">0</div>\n'},522:function(t,e){t.exports='<%= icon %><span class="sharecount__value sharecount__value--short">0</span> Shares\n'},523:function(t,e){t.exports='<details class="campaign campaign--snippet">\n\n    <summary class="campaign--snippet__header">\n        <div class="campaign--kicker">\n            <div class="campaign--snippet__heading-logo">\n                <div class="speech-bubble">\n                    <h4>Share your story</h4>\n                </div>\n            </div>\n            <div class="campaign--snippet__heading-text">\n                <h4 class="campaign--snippet__headline"> <%= data.title %></h4>\n                <%= data.description %>\n            </div>\n            <div class="success_box">\n                <p class="success-message">Thank you for your contribution</p>\n            </div>\n        </div>\n        <button class="campaign__button campaign__button--large campaign__button--rounded campaign--snippet__handle" aria-hidden="true">\n            <span class="is-off">\n                <svg class="icon icon--plus " viewBox="0 0 18 18">\n                    <path d="M8.2 0h1.6l.4 7.8 7.8.4v1.6l-7.8.4-.4 7.8H8.2l-.4-7.8L0 9.8V8.2l7.8-.4.4-7.8z"></path>\n                </svg>\n                    Tell us\n            </span>\n            <span class="is-on">\n                <svg class="icon icon--minus " viewBox="0 0 32 32">\n                    <rect x="5" y="15" width="22" height="3"></rect>\n                </svg>\n                  Hide\n            </span>\n        </button>\n    </summary>\n\n\n    <form action="/formstack-campaign/submit" method="post" class="campaign--snippet__body">\n\n        <input name="formId" type="hidden" value="<%=data.formId%>" />\n\n        <% data.formFields.forEach(function(field) { %>\n\n        <div class="form_input form_input--<%=field.type%>">\n            <div class="form_field">\n                <label for="<%=field.name%>"\n                       class="form_field_label <% if (field.required == \'1\') { %> required <% } %>" >\n                    <%= field.label %>\n                    <% if(field.description) { %>\n                        <span>(<%= field.description %>)</span>\n                    <% } %>\n                </label>\n\n                <% if(field.type === "textarea") { %>\n                <textarea name="field_<%=field.id%>"<% if (field.required == "1") { %> required <% } %>/></textarea>\n\n                <% } else if(field.type === "radio" || field.type === "checkbox") { %>\n                <div class="form_option_container">\n                <% field.options.forEach(function(option){ %>\n                    <input type="<%=field.type%>"\n                       value="<%=option.value%>"\n                       id="<%=option.label%>"\n                       name="field_<%=field.id%>"\n                    <% if (field.required == "1") { %> required <% } %>\n                    />\n                    <label for="<%=option.label%>">\n                        <%=option.value%>\n                    </label>\n                <% }) %>\n                </div>\n\n                <% } else if(field.type === "select") { %>\n                <select name="field_<%=field.id%>"\n                <% if (field.required == "1") { %> required <% } %>\n                >\n                <% field.options.forEach(function(option){ %>\n                <option value="<%=option.value%>">\n                    <%=option.value%>\n                </option>\n                <% }) %>\n\n                </select>\n\n                <% } else if(field.type === "file") { %>\n                <input name="field_<%=field.id%>"\n                       type="file"\n                       accept="image/*, .pdf, .doc, .xml, .docx"\n                <% if (field.required == "1") { %> required <% } %>\n                />\n\n                <% } else { %>\n                <input name="field_<%=field.id%>"\n                       type="<%=field.type%>"\n                <% if (field.required == "1") { %> required <% } %>\n                />\n                <% } %>\n            </div>\n\n        </div>\n\n        <% }) %>\n        <div class="form_input form_input--twitter-handle">\n            <div class="form_field">\n                <input name="twitter-handle" type="text" id="twitter-handle" placeholder="@mytwitterhandle"/>\n            </div>\n        </div>\n        <div class="form_footer">\n            <div class="form_submit">\n                <button class="button button--rounded" type="submit">Share with the Guardian</button>\n            </div>\n            <div class="t_and_c">\n                <a href="https://www.theguardian.com/help/terms-of-service">Terms and conditions</a>\n            </div>\n        </div>\n        <div class="error_box"></div>\n\n    </form>\n\n</details>\n'},528:function(t,e){t.exports='<li class="<%=articleType%>-lightbox__item <%=articleType%>-lightbox__item--img js-<%=articleType%>-slide">\n    <div class="<%=articleType%>-lightbox__img-container"><img class="<%=articleType%>-lightbox__img js-<%=articleType%>-lightbox-img"></div>\n    <div class="<%=articleType%>-lightbox__info js-<%=articleType%>-lightbox-info">\n        <div class="<%=articleType%>-lightbox__progress <%=articleType%>-lightbox__progress--info">\n            <span class="<%=articleType%>-lightbox__index"><%=index%></span>\n            <span class="<%=articleType%>-lightbox__progress-separator"></span>\n            <span class="<%=articleType%>-lightbox__count"><%=count%></span>\n            </div>\n        <div class="<%=articleType%>-lightbox__img-caption"><%=caption%></div>\n        <div class="<%=articleType%>-lightbox__img-credit"><%=credit%></div>\n        <div class="block-share block-share--<%=articleType%>" data-link-name="block share">\n            <%=shareButtons%>\n        </div>\n</li>\n'},529:function(t,e){t.exports='<div class="gallery-lightbox__btn gallery-lightbox__btn--<%=label%> js-gallery-<%=label%>">\n<button data-link-name="gallery-lightbox <%=label%>" class="gallery-lightbox__btn-body"><i></i><%=label%></button>\n</div>'},530:function(t,e){t.exports='<li class="gallery-lightbox__item gallery-lightbox__item--endslate js-gallery-slide">\n<div class="gallery-lightbox__endslate js-gallery-endslate fc-container--media"></div>\n</li>'},531:function(t,e){t.exports='<div class="pamplemousse gallery-lightbox__loader js-loader">\n<div class="pamplemousse__pip"><i></i></div>\n<div class="pamplemousse__pip"><i></i></div>\n<div class="pamplemousse__pip"><i></i></div>\n</div>'},532:function(t,e){t.exports='<a class="rounded-icon block-share__item block-share__item--<%=css%> js-blockshare-link" href="<%=url%>" target="_blank" data-link-name="social <%=css%>">\n    <span class="u-h"><%=text%></span>\n    <%= icon %>\n</a>\n'},618:function(t,e,n){"use strict";n.r(e),n.d(e,"init",function(){return K}),n.d(e,"_",function(){return Q});var i=n(33),a=n.n(i),o=n(1),s=n.n(o),r=n(9),c=n.n(r),l=n(15),d=n.n(l),u=n(49),h=n.n(u),f=n(48),g=n.n(f),p=n(50),m=n.n(p),v=n(11),b=n.n(v),y=n(2),w=n.n(y),x=n(18),j=n.n(x),_=n(12),k=n(0),C=n(10),T=n(356),O=n(5),E=n(133),S=n.n(E),I=n(125),P=n.n(I),A=n(28),L=n(30),$=n(137),B=n(528),q=n.n(B),R=n(529),M=n.n(R),D=n(530),z=n.n(D),U=n(531),H=n.n(U),F=n(532),N=n.n(F),J=n(326),V=n(45),Y=function(t){var e=w()(t);e.addClass("gallery-lightbox__button-pulse"),window.setTimeout(function(){e.removeClass("gallery-lightbox__button-pulse")},75)},W=function(t){function e(){return c()(this,e),h()(this,g()(e).apply(this,arguments))}return m()(e,t),d()(e,[{key:"prerender",value:function(){w()(this.elem).addClass(this.componentClass)}}]),e}(L.a),G=function(){function t(){var e=this;c()(this,t),s()(this,"showEndslate",void 0),s()(this,"useSwipe",void 0),s()(this,"swipeThreshold",void 0),s()(this,"lightboxEl",void 0),s()(this,"$lightboxEl",void 0),s()(this,"$indexEl",void 0),s()(this,"$countEl",void 0),s()(this,"$contentEl",void 0),s()(this,"nextBtn",void 0),s()(this,"prevBtn",void 0),s()(this,"closeBtn",void 0),s()(this,"infoBtn",void 0),s()(this,"$swipeContainer",void 0),s()(this,"resize",void 0),s()(this,"toggleInfo",void 0),s()(this,"fsm",void 0),s()(this,"states",void 0),s()(this,"images",void 0),s()(this,"swipeContainerWidth",void 0),s()(this,"$slides",void 0),s()(this,"index",void 0),s()(this,"$images",void 0),s()(this,"galleryJson",void 0),s()(this,"bodyScrollPosition",void 0),s()(this,"endslateEl",void 0),s()(this,"endslate",void 0),s()(this,"startIndex",void 0),s()(this,"endslate",new W),s()(this,"states",{closed:{enter:function(){this.hide()},leave:function(){this.show(),Object(A.g)({},document.title,"/".concat(this.galleryJson.id))},events:{open:function(){this.swipe&&this.swipe.slide(this.index,0),this.state="image"},loadJson:function(t){this.galleryJson=t,this.loadHtml(t),this.showEndslate&&this.loadEndslate(),this.$slides=Object(_.a)(".js-gallery-slide",this.$contentEl[0]),this.useSwipe&&this.initSwipe(),this.state="image"}}},image:{enter:function(){this.swipeContainerWidth=this.$swipeContainer.dim().width,this.loadSurroundingImages(this.index,this.images.length),this.translateContent(this.index,0,this.useSwipe&&Object(C.m)({max:"tablet"})?100:0),Object(A.g)({},document.title,"/".concat(this.galleryJson.id,"#img-").concat(this.index),!0),b.a.on(this.$swipeContainer[0],"click",".js-gallery-content",this.toggleInfo),O.a.on("window:throttledResize",this.resize),this.$indexEl.text(this.index)},leave:function(){b.a.off(this.$swipeContainer[0],"click",this.toggleInfo),O.a.off("window:throttledResize",this.resize)},events:{next:function(){Y(this.nextBtn),this.index===this.images.length?this.showEndslate?this.state="endslate":(this.index=1,this.reloadState=!0):(this.index+=1,this.reloadState=!0)},prev:function(){Y(this.prevBtn),1===this.index?this.showEndslate?this.state="endslate":(this.index=this.images.length,this.reloadState=!0):(this.index-=1,this.reloadState=!0)},reload:function(){this.reloadState=!0},toggleInfo:function(){Y(this.infoBtn),this.$lightboxEl.toggleClass("gallery-lightbox--show-info")},hideInfo:function(){Y(this.infoBtn),this.$lightboxEl.removeClass("gallery-lightbox--show-info")},showInfo:function(){Y(this.infoBtn),this.$lightboxEl.addClass("gallery-lightbox--show-info")},resize:function(){this.swipeContainerWidth=this.$swipeContainer.dim().width,this.loadSurroundingImages(this.index,this.images.length),this.translateContent(this.index,0,0)},close:function(){this.state="closed"}}},endslate:{enter:function(){this.translateContent(this.$slides.length,0,0),this.index=this.images.length+1,O.a.on("window:throttledResize",this.resize)},leave:function(){O.a.off("window:throttledResize",this.resize)},events:{next:function(){Y(this.nextBtn),this.index=1,this.state="image"},prev:function(){Y(this.prevBtn),this.index=this.images.length,this.state="image"},reload:function(){this.reloadState=!0},resize:function(){this.swipeContainerWidth=this.$swipeContainer.dim().width,this.translateContent(this.$slides.length,0,0)},close:function(){this.state="closed"}}}}),this.showEndslate="mobile"!==Object(C.d)()&&"childrens-books-site"!==k.a.get("page.section")&&"Gallery"===k.a.get("page.contentType"),this.useSwipe=Object(C.j)(),this.swipeThreshold=.05;var n=function(t){var e=M.a;return S()(e)({label:t})},i='<div class="overlay gallery-lightbox gallery-lightbox--closed gallery-lightbox--hover">\n                <div class="gallery-lightbox__sidebar">\n                    '.concat(n("close"),'\n                    <div class="gallery-lightbox__progress  gallery-lightbox__progress--sidebar">\n                        <span class="gallery-lightbox__index js-gallery-index"></span>\n                        <span class="gallery-lightbox__progress-separator"></span>\n                        <span class="gallery-lightbox__count js-gallery-count"></span>\n                    </div>\n                    ').concat(n("next"),"\n                    ").concat(n("prev"),"\n                    ").concat(n("info-button"),'\n                </div>\n                <div class="js-gallery-swipe gallery-lightbox__swipe-container">\n                    <ul class="gallery-lightbox__content js-gallery-content"></ul>\n                </div>\n            </div>');this.lightboxEl=w.a.create(i),this.$lightboxEl=w()(this.lightboxEl).prependTo(document.body),this.$indexEl=Object(_.a)(".js-gallery-index",this.lightboxEl),this.$countEl=Object(_.a)(".js-gallery-count",this.lightboxEl),this.$contentEl=Object(_.a)(".js-gallery-content",this.lightboxEl),this.nextBtn=j()(".js-gallery-next",this.lightboxEl)[0],this.prevBtn=j()(".js-gallery-prev",this.lightboxEl)[0],this.closeBtn=j()(".js-gallery-close",this.lightboxEl)[0],this.infoBtn=j()(".js-gallery-info-button",this.lightboxEl)[0],this.$swipeContainer=Object(_.a)(".js-gallery-swipe"),b.a.on(this.nextBtn,"click",this.trigger.bind(this,"next")),b.a.on(this.prevBtn,"click",this.trigger.bind(this,"prev")),b.a.on(this.closeBtn,"click",this.close.bind(this)),b.a.on(this.infoBtn,"click",this.trigger.bind(this,"toggleInfo")),this.resize=this.trigger.bind(this,"resize"),this.toggleInfo=function(t){w()(t.target).hasClass("js-gallery-lightbox-info")||_.a.ancestor(t.target,"js-gallery-lightbox-info")||e.trigger("toggleInfo")},Object(C.j)()&&this.disableHover(),b.a.on(window,"popstate",function(t){t.state||e.trigger("close")}),this.fsm=new T.a({initial:"closed",onChangeState:function(t,e){this.$lightboxEl.removeClass("gallery-lightbox--".concat(t)).addClass("gallery-lightbox--".concat(e))},context:this,states:this.states})}return d()(t,[{key:"generateImgHTML",value:function(t,e){var n=k.a.get("page.shortUrl"),i=t.src.startsWith("//")?"http:":"",a=[{text:"Facebook",css:"facebook",icon:Object($.a)("shareFacebook",["icon"]),url:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent("".concat(n,"/sfb#img-").concat(e)))},{text:"Twitter",css:"twitter",icon:Object($.a)("shareTwitter",["icon"]),url:"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(k.a.get("page.webTitle")),"&url=").concat(encodeURIComponent("".concat(n,"/stw#img-").concat(e)))},{text:"Pinterest",css:"pinterest",icon:Object($.a)("sharePinterest",["icon"]),url:encodeURI("http://www.pinterest.com/pin/create/button/?description=".concat(k.a.get("page.webTitle"),"&url=").concat(n,"&media=").concat(i).concat(t.src))}];return S()(q.a.replace(/^\s+|\s+$/gm,""))({articleType:"gallery",count:this.images.length,index:e,caption:t.caption,credit:t.displayCredit?t.credit:"",blockShortUrl:n,shareButtons:a.map(function(t){return S()(N.a)(t)}).join("")})}},{key:"initSwipe",value:function(){var t,e,n,i=this;b.a.on(this.$swipeContainer[0],"touchstart",function(a){t=i.swipeContainerWidth*i.swipeThreshold,e=a.touches[0].pageX,n=0}),b.a.on(this.$swipeContainer[0],"touchmove",P()(function(t){t.preventDefault(),t.touches.length>1||t.scale&&1!==t.scale||(n=t.touches[0].pageX-e,i.translateContent(i.index,n,20))},20,{trailing:!1})),b.a.on(this.$swipeContainer[0],"touchend",function(){var e;e=Math.abs(n)>t?n>t?1:-1:0,n=0,1===e?i.index>1?i.trigger("prev"):i.trigger("reload"):-1===e&&i.index<i.$slides.length?i.trigger("next"):i.trigger("reload")})}},{key:"disableHover",value:function(){this.$lightboxEl.removeClass("gallery-lightbox--hover")}},{key:"trigger",value:function(t,e){this.fsm.trigger(t,e)}},{key:"loadOrOpen",value:function(t,e){this.index=e,this.galleryJson&&t.id===this.galleryJson.id&&t.images.length===this.galleryJson.images.length?this.trigger("open"):this.trigger("loadJson",t)}},{key:"fetchSurroundingJson",value:function(e){var n=this;if("ImageContent"===k.a.get("page.contentType")&&e.images.length<2){var i=window.location.pathname.substring(1);return Promise.all([t.loadNextOrPrevious(i,"forwards"),t.loadNextOrPrevious(i,"backwards")]).then(function(t){var e=a()(t,2),n=e[0],i=e[1];return{next:n.map(function(t){return t.images[0]}),previous:i.map(function(t){return t.images[0]})}}).then(function(t){var i=t.next,a=t.previous,o=a.reverse().concat(e.images,i);return o.length<2&&(w()([n.nextBtn,n.prevBtn]).hide(),Object(_.a)(".gallery-lightbox__progress",n.lightboxEl).hide()),e.images=o,n.startIndex=a.length+1,e})}return Promise.resolve(e)}},{key:"loadHtml",value:function(t){var e=this;this.images=t.images||[];var n=t.images.map(function(t,n){return e.generateImgHTML(t,n+1)}).join("");this.$contentEl.html(n),this.$images=Object(_.a)(".js-gallery-lightbox-img",this.$contentEl[0]),this.$countEl.text(this.images.length)}},{key:"loadSurroundingImages",value:function(t,e){var n,i,a=this;[-1,0,1].map(function(n){return t+n===0?e-1:(t-1+n)%e}).forEach(function(t){n=a.images[t],(i=w()(a.$images[t])).attr("src")||(i.parent().append(w.a.create(H.a)),i.attr("src",n.src),i.attr("srcset",n.srcsets),i.attr("sizes",n.sizes),b.a.one(i[0],"load",function(){Object(_.a)(".js-loader").remove()}))})}},{key:"translateContent",value:function(t,e,n){var i=-1*(t-1)*this.swipeContainerWidth,a=this.$contentEl[0];Object.assign(a.style,{webkitTransitionDuration:"".concat(n,"ms"),mozTransitionDuration:"".concat(n,"ms"),msTransitionDuration:"".concat(n,"ms"),transitionDuration:"".concat(n,"ms"),webkitTransform:"translate(".concat(i+e,"px,0) translateZ(0)"),mozTransform:"translate(".concat(i+e,"px,0)"),msTransform:"translate(".concat(i+e,"px,0)"),transform:"translate(".concat(i+e,"px,0) translateZ(0)")})}},{key:"show",value:function(){var t=this,e=w()(document.body);this.bodyScrollPosition=e.scrollTop(),e.addClass("has-overlay"),this.$lightboxEl.addClass("gallery-lightbox--open"),b.a.off(document.body,"keydown",function(e){return t.handleKeyEvents(e)}),b.a.on(document.body,"keydown",function(e){return t.handleKeyEvents(e)})}},{key:"close",value:function(){A.i?Object(A.a)():this.trigger("close"),this.trigger("close")}},{key:"hide",value:function(){var t=this,e=w()(document.body);e.removeClass("has-overlay"),b.a.off(document.body,"keydown",this.handleKeyEvents),window.setTimeout(function(){t.bodyScrollPosition&&e.scrollTop(t.bodyScrollPosition),t.$lightboxEl.removeClass("gallery-lightbox--open"),O.a.emit("ui:images:vh")},1)}},{key:"handleKeyEvents",value:function(t){37===t.keyCode?this.trigger("prev"):39===t.keyCode?this.trigger("next"):38===t.keyCode?this.trigger("showInfo"):40===t.keyCode?this.trigger("hideInfo"):27===t.keyCode?this.close():73===t.keyCode&&this.trigger("toggleInfo")}},{key:"loadEndslate",value:function(){!this.endslate.rendered&&this.$contentEl&&(this.endslateEl=w.a.create(z.a),this.$contentEl.append(this.endslateEl),this.endslate.componentClass="gallery-lightbox__endslate",this.endslate.endpoint="/gallery/most-viewed.json",this.endslate.fetch(j()(".js-gallery-endslate",this.endslateEl),"html"))}}],[{key:"loadNextOrPrevious",value:function(t,e){var n="forwards"===e?"getnext":"getprev",i=k.a.get("page.nonKeywordTagIds","").split(",").filter(function(t){return t.includes("series")})[0],a="/".concat(n,"/").concat(i,"/").concat(t);return Object(V.a)(a).then(function(t){return t.json()}).then(function(t){return t.filter(function(t){return t.images.length>0})})}}]),t}(),K=function(){J.a.then(function(){var t=k.a.get("page.lightboxImages");if(t&&t.images.length>0){var e=new G,n=window.location.hash;b.a.on(document.body,"click",".js-gallerythumbs",function(n){n.preventDefault();var i=w()(n.currentTarget),a=(i.attr("href")||i.attr("data-gallery-url")).split("#img-"),o=parseInt(a[1],10),s=Number.isNaN(o)?1:o;e.fetchSurroundingJson(t).then(function(t){var n=e.startIndex?e.startIndex:s;e.loadOrOpen(t,n)})});var i="/".concat(k.a.get("page.pageId")),a=/\?index=(\d+)/.exec(document.location.href),o=/^#(?:img-)?(\d+)$/.exec(n),s=0;a?(Object(A.g)({},document.title,i,!0),s=parseInt(a[1],10)):o&&(s=parseInt(o[1],10)),s>0&&e.fetchSurroundingJson(t).then(function(t){e.loadOrOpen(t,s)})}})},Q={GalleryLightbox:G}},619:function(t,e,n){"use strict";n.r(e),n.d(e,"init",function(){return c});var i=n(18),a=n.n(i),o=n(0),s=n(30),r=n(335),c=function(){var t,e;Object(r.initTrails)(),o.a.get("page.showRelatedContent")&&(t=new s.a,e=a()(".js-gallery-most-popular")[0],t.manipulationType="html",t.endpoint="/gallery/most-viewed.json",t.fetch(e,"html"))}},630:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n(18),o=n.n(a),s=n(12),r=n(120),c=n(10),l=n(5),d=n(28),u=n(407),h=n(4),f=n.n(h),g=n(7),p=n(14),m=function(t){var e=Object(s.a)("a",t).attr("href");e.match(/https:\/\/membership.theguardian.com/)&&Object(g.a)("".concat(e,"/card"),{mode:"cors"}).then(function(e){e.html&&f.a.write(function(){Object(s.a)(t).html(e.html).removeClass("element-membership--not-upgraded").addClass("element-membership--upgraded")})}).catch(function(t){Object(p.a)(t,{feature:"membership-events"})})},v=function(){Object(s.a)(".".concat("element-membership--not-upgraded")).each(m)},b=n(352),y=n(11),w=n.n(y),x=n(6),j=function(){if(HTMLFormElement.prototype.checkValidity){var t=Array.from(document.getElementsByClassName("js-atom-quiz--instant-reveal"));t.length&&w.a.on(document,"click",t,function t(e){var n=e.currentTarget,i=n.querySelectorAll(":checked + .atom-quiz__answer__item--is-correct").length;if(n.checkValidity()){var a=function(){var e=n.querySelector(".js-atom-quiz__bucket-message--".concat(i));if(e)return x.a.write(function(){e.style.display="block"}),w.a.off(document,"click",t),"break";i-=1};do{if("break"===a())break}while(i>=0)}})}},_=n(370),k=n(335),C=n(133),T=n.n(C),O=n(523),E=n.n(O),S=n(524),I=n.n(S),P=n(527),A=n.n(P),L=n(45),$=i.a.get("page.calloutsUrl"),B=function(t){return t.name>""},q=function(t){var e=t.closest(".element-campaign");x.a.write(function(){e.classList.add("success")})},R=function(t){var e=t.querySelector("button"),n=t.querySelector(".error_box");x.a.write(function(){e.textContent="Sending...",e.disabled=!0,n.innerHTML=""})},M=function(t,e){var n=t.querySelector(".error_box");n&&x.a.write(function(){n.innerHTML='<p class="error">'.concat(e,"</p>")}),function(t){var e=t.getElementsByTagName("button")[0];e.disabled=!1,e.textContent="Share with the Guardian"}(t)},D=function(t,e){if(function(t){return"checkbox"===t.type}(t))return(e[t.name]||"").concat("\n".concat(t.value));if(function(t){return"file"===t.type}(t)&&t.files[0]){var n=t.closest("form");return function(t,e){return new Promise(function(n){var i=new FileReader;i.addEventListener("load",function(){var t=i.result.toString().split(";base64,")[1];n(t)},!1),i.addEventListener("error",function(){M(e,"Sorry there was a problem with the file you uploaded above. Check the size and type. We only accept images, pdfs and .doc or .docx files")}),i.readAsDataURL(t)})}(t.files[0],n)}return t.value},z=function(){var t=A()(I.a.mark(function t(e){var n,i;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=e.target,t.next=4,a=n.elements,[].reduce.call(a,function(){var t=A()(I.a.mark(function t(e,n){var i,a;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:if(i=t.sent,!B(n)){t.next=9;break}return t.next=6,D(n,i);case 6:return a=t.sent,i[n.name]=a,t.abrupt("return",i);case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),Promise.resolve({}));case 4:if(!((i=t.sent)["twitter-handle"].length>0)){t.next=8;break}return M(n,"Sorry we think you are a robot."),t.abrupt("return",!1);case 8:return R(n),t.abrupt("return",Object(L.a)($,{method:"post",body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){t.ok?q(n):M(n,"Sorry, there was a problem submitting your form. Please try again later.")}).catch(function(){console.error("Request to ".concat($," failed")),M(n,"Sorry, there was a problem submitting your form. Please try again later.")}));case 10:case"end":return t.stop()}var a},t,this)}));return function(e){return t.apply(this,arguments)}}(),U=function(){var t,e=i.a.get("page.campaigns").filter(function(t){return"callout"===t.fields._type}).reduce(function(t,e){return t[e.fields.tagName]={name:e.name,title:e.fields.callout,description:e.fields.description||"",formFields:e.fields.formFields,formId:e.fields.formId,tagName:e.fields.tagName},t},{});(t=document.querySelectorAll("figure[data-alt]"),Array.from(t).filter(function(t){var e=t.getAttribute("data-alt");return!!e&&e.toLowerCase().startsWith("callout")})).forEach(function(t){var n=t.getAttribute("data-alt");if(n){var i=n.toLowerCase().split(" ")[1];i in e?function(t,e){var n=T()(E.a)({data:e}),i='<figure class="element element-campaign">'.concat(n,"</figure>");x.a.write(function(){t.innerHTML=i}).then(function(){var e=t.querySelector(".element-campaign .campaign .campaign--snippet__body");e&&e.addEventListener("submit",z)})}(t,e[i]):t.innerHTML=""}})},H=n(16),F=n.n(H);n.d(e,"init",function(){return J});var N={initCmpParam:function(){var t=Object(d.d)();t.CMP&&Object(s.a)(".element-pass-cmp").each(function(e){e.src="".concat(e.src,"?CMP=").concat(t.CMP)})},initRightHandComponent:function(){var t=o()(".js-content-main-column");!i.a.hasTone("Match reports")&&t[0]&&t[0].offsetHeight>1150&&Object(c.m)({min:"desktop"})?b.a.render():l.a.emit("modules:onward:geo-most-popular:cancel")},initQuizListeners:function(){l.a.on("quiz/ophan-event",F.a.record)},emitReadyEvent:function(){l.a.emit("page:article:ready")}},J=function(){Object(r.b)([["article-trails",k.initTrails],["article-liveblog-common",_.a],["article-righthand-component",N.initRightHandComponent],["article-cmp-param",N.initCmpParam],["article-quiz-listeners",N.initQuizListeners],["article-rich-links",u.b],["article-tag-rich-link",u.a],["article-upgrade-membership-events",v],["article-mediator-emit-event",N.emitReadyEvent],["article-handle-quiz-completion",j],["article-campaign",U]])}},634:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n(10),o=n(5),s=n(407),r=n(9),c=n.n(r),l=n(15),d=n.n(l),u=n(1),h=n.n(u),f=n(2),g=n.n(f),p=n(6),m=function(){function t(e){var n=this;c()(this,t),h()(this,"affixed",void 0),h()(this,"$markerTop",void 0),h()(this,"$markerBottom",void 0),h()(this,"$container",void 0),h()(this,"$element",void 0),h()(this,"$window",void 0),window.addEventListener("click",function(){n.checkPosition()}),o.a.addListener("window:throttledScroll",function(){n.checkPosition()}),o.a.addListener("window:throttledResize",function(){n.calculateContainerPositioning()}),this.affixed=!1,this.$markerTop=g()(e.topMarker),this.$markerBottom=g()(e.bottomMarker),this.$container=g()(e.containerElement),this.$element=g()(e.element),this.$window=g()(document.body),this.checkPosition(),this.calculateContainerPositioning()}return d()(t,[{key:"calculateContainerPositioning",value:function(){var t=this;p.a.write(function(){t.$container.css("top","0")}).then(function(){return p.a.read(function(){return t.$markerTop.offset().top-t.$container.offset().top})}).then(function(e){p.a.write(function(){t.$container.css("top","".concat(e,"px"))})})}},{key:"checkPosition",value:function(){var t,e=this,n=this.$window.scrollTop(),i=this.$markerTop.offset().top,a=this.$markerBottom.offset().top,o=this.$element.dim().height,s=n>=i,r=n+o<a,c=o<g.a.viewport().height,l=r&&s&&c;if(this.affixed!==l){if(this.affixed=l,r)p.a.write(function(){e.$container.removeClass("affix-bottom")}),this.calculateContainerPositioning();else{var d=a-i-o+("auto"!==(t=this.$container.css("top"))?parseInt(t,10):0);p.a.write(function(){e.$container.css("top","".concat(d,"px")),e.$container.addClass("affix-bottom")})}p.a.write(function(){l?e.$element.addClass("affix"):e.$element.removeClass("affix")})}}}]),t}(),v=n(11),b=n.n(v),y=n(18),w=n.n(y),x=n(12),j=n(7),_=n(408),k=n(322),C=n(154),T=n(298),O=n(142),E=function(t){var e,n=Object.assign({toastOffsetTop:12,minUpdateDelay:1e3*(Object(a.m)({min:"desktop"})?10:30),maxUpdateDelay:12e5,backoffMultiplier:.75},t),i=Object(x.a)(".js-liveblog-body"),s=Object(x.a)(".toast__button"),r=Object(x.a)(".toast__text",s),c=w()(".toast__container")[0],l=n.minUpdateDelay,d=i.data("most-recent-block"),u=0,h=!window.location.search.includes("?page="),f=function(){p.a.write(function(){Object(x.a)(".autoupdate--hidden",i).addClass("autoupdate--highlight").removeClass("autoupdate--hidden"),o.a.emit("modules:autoupdate:unread",0)})},m=function(){p.a.write(function(){if(u>0){var t=u>1?" new updates":" new update";s.removeClass("toast__button--closed"),Object(x.a)(c).addClass("toast__container--open"),r.html(u+t)}else s.removeClass("loading").addClass("toast__button--closed"),Object(x.a)(c).removeClass("toast__container--open")})},v=function(){Object(a.p)()&&f(),u=0,m()},y=function t(){void 0!==e&&clearTimeout(e);var s=0,r="&isLivePage=".concat(h?"true":"false"),c="?lastUpdate=".concat(d||"block-0").concat(r),f="".concat(window.location.pathname,".json").concat(c),b=function(){var i,o;0===s||l>0?(i=l,o=Object(a.p)()?n.minUpdateDelay:Math.min(1.5*i,n.maxUpdateDelay),l=o,e=setTimeout(t,l)):e=setTimeout(t,1)};return Object(j.a)(f,{mode:"cors"}).then(function(t){var e,n,a;(s=t.numNewBlocks)>0&&(u+=s,o.a.emit("modules:autoupdate:unread",u),d=t.mostRecentBlockId,h?(e=t.html,a=x.a.create("<div>".concat(e,"</div>"))[0],p.a.write(function(){g()(a.children).addClass("autoupdate--hidden"),n=Array.from(a.children),i.prepend(n),o.a.emit("modules:autoupdate:updates",n.length),Object(T.a)(),Object(_.a)(),Object(O.a)(n)}),i.offset().top<window.pageYOffset?m():v()):m()),b()}).catch(function(){b()})};(function(){var t=document.title;o.a.on("modules:autoupdate:unread",function(e){!function(t,e){document.title=t>0?"(".concat(t,") ").concat(e):e}(e,t)})})(),new k.a(c,{top:n.toastOffsetTop,emitMessage:!0,containInParent:!1}).init(),y(),Object(a.k)(),b.a.on(document.body,"click",".toast__button",function(){h?p.a.read(function(){Object(C.b)(w()(".blocks")[0],300,"easeOutQuad"),p.a.write(function(){s.addClass("loading")}).then(function(){v()})}):window.location.assign(window.location.pathname)}),o.a.on("modules:toast__tofix:unfixed",function(){h&&u>0&&p.a.write(function(){s.addClass("loading")}).then(function(){v()})}),o.a.on("modules:detect:pagevisibility:visible",function(){0===u&&f(),l=0,y()}),p.a.write(function(){i.addClass("autoupdate--has-animation")})},S=n(370),I=n(335),P=n(120);n.d(e,"init",function(){return B});var A=function(){var t=i.a.get("page.keywordIds","");!Object(a.m)({min:"desktop"})||t.includes("football/football")||t.includes("sport/rugby-union")||new m({element:document.querySelector(".js-live-blog__sticky-components-container"),topMarker:document.querySelector(".js-top-marker"),bottomMarker:document.querySelector(".js-bottom-marker"),containerElement:document.querySelector(".js-live-blog__sticky-components")})},L=function(){i.a.get("page.isLive")&&E()},$=function(){window.setInterval(function(){return Object(T.a)()},6e4)},B=function(){Object(P.b)([["lb-autoupdate",L],["lb-timeline",A],["lb-timestamp",$],["lb-richlinks",s.b]]),Object(I.initTrails)(),Object(S.a)(),Object(P.b)([["lb-ready",function(){o.a.emit("page:liveblog:ready")}]])}},637:function(t,e,n){"use strict";n.r(e);var i=n(370),a=n(335),o=n(12),s=n(6),r=n(5),c=n(10),l=function(t){t.elements.forEach(function(e){!function(t){s.a.write(function(){t.$el.css("height","")}).then(function(){if(t.isMobile)return s.a.read(function(){return t.$el.height()}).then(function(e){return s.a.write(function(){t.$el.css("height",e)})})})}({$el:Object(o.a)(e),isMobile:t.isMobile})})},d=function(){s.a.read(function(){return{elements:Array.from(document.getElementsByClassName("js-is-fixed-height")),isMobile:"mobile"===Object(c.d)()}}).then(l)};n.d(e,"init",function(){return u});var u=function(){Object(i.a)(),Object(a.initTrails)(),r.a.on("window:throttledResize",d),r.a.on("window:orientationchange",d),d()}}}]);
//# sourceMappingURL=graun.trail.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{148:function(e,t,n){"use strict";n.d(t,"d",function(){return A}),n.d(t,"e",function(){return M}),n.d(t,"f",function(){return B}),n.d(t,"g",function(){return L}),n.d(t,"h",function(){return I}),n.d(t,"b",function(){return E}),n.d(t,"a",function(){return _}),n.d(t,"c",function(){return O});var a,i,o,s,r=n(4),c=n.n(r),u=n(12),l=n(8),d=n(28),m=n(17),g=n.n(m),f=["uk","us","au"],h=["business","commentisfree","culture","environment","media","money","sport","technology"],p=[{tid:"section",tname:"sectionName"},{tid:"keywordIds",tname:"keywords"},{tid:"seriesId",tname:"series"},{tid:"authorIds",tname:"author"}],b=[{type:"content",indexInRecord:1},{type:"front",indexInRecord:2}],v=Math.floor(Date.now()/864e5),w=!1,y=function(e){i=e,l.a.set("gu.history.summary",e)},k=function(){return a=a||l.a.get("gu.history")||[]},j=function(){return i||(i=l.a.get("gu.history.summary"),g()(i)&&g()(i.tags)&&"number"==typeof i.periodEnd||(i={periodEnd:v,tags:{},showInMegaNav:!0})),i},_=function(e){var t=j();delete t.tags[e],y(t)},O=function(e){var t=k().find(function(t){return t[0]===e});return!!(t&&t[1]>1)},C=function(e){var t=new RegExp("^(".concat(f.join("|"),")/(").concat(h.join("|"),")$")),n=new RegExp("^(".concat(f.join("|"),")/"));if(e){var a=e.replace(/^\/|\/$/g,"");a.match(t)&&(a=a.replace(n,""));var i=a.split("/");return 2===i.length&&i[0]===i[1]&&(a=[i[0]].join("/")),a}return""},E=function(e){var t=e&&e.flush;return o=!t&&o||function(e){var t=j().tags,n=Object.keys(t),a=Object.assign({},{number:100,weights:{},thresholds:{}},e);return a.whitelist&&(n=n.filter(function(e){return a.whitelist.includes(e)})),a.blacklist&&(n=n.filter(function(e){return!a.blacklist.includes(e)})),n.map(function(e){var n=t[e],i=b.reduce(function(e,t){return e+function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=0,i=e.reduce(function(e,n){var i=n[0],o=n[1];return a+=o,e+t*(9+o)*(90-i)},0);return a<n?0:i}(n[t.indexInRecord],a.weights[t.type],a.thresholds[t.type])},0);return{idAndName:[e,n[0]],rank:i}}).filter(Boolean).sort(function(e,t){return e.rank-t.rank}).slice(-a.number).map(function(e){return e.idAndName}).reverse()}({blacklist:s=s||Object(u.a)(".js-navigation-header .js-top-navigation a").map(function(e){return C(Object(d.c)(Object(u.a)(e).attr("href")))}),number:10,weights:{content:1,front:5},thresholds:{content:5,front:1}})},T=function(e){return(e||"").split(",")[0]},A=function(e){var t,n=e.pageId,i=0;e.isFront||((t=k().filter(function(e){var t=Array.isArray(e),a=t&&e[0]===n;return i=a?e[1]:i,t&&!a})).unshift([n,i+1]),function(e){a=e,l.a.set("gu.history",e)}(t.slice(0,50)))},M=function(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,n=t-e.periodEnd;return 0!==n&&(e.periodEnd=t,Object.keys(e.tags).forEach(function(t){var a=e.tags[t],i=b.map(function(e){if(a[e.indexInRecord]){var t=a[e.indexInRecord].map(function(e){var t=e[0]+n;return t<90&&t>=0&&[t,e[1]]}).filter(Boolean);return t.length>1||1===t.length&&t[0][0]<10?t:[]}return[]});i.some(function(e){return e.length})?e.tags[t]=[a[0]].concat(i):delete e.tags[t]})),e}(j(),t),a=C(e.pageId),i=!1,o=p.reduceRight(function(t,n){var o=C(T(e[n.tid])),s=o&&T(e[n.tname]);return o&&s&&(t[o]=s),i=i||o===a,t},{});Object.keys(o).forEach(function(e){var t=o[e],a=n.tags[e]||[];b.forEach(function(e){a[e.indexInRecord]=a[e.indexInRecord]||[]}),a[0]=t;var s=a[i?2:1],r=s.find(function(e){return 0===e[0]});r?r[1]+=1:s.unshift([0,1]),n.tags[e]=a}),y(n)},S=function(){return Object(u.a)(".js-global-navigation")},N=function(){S().each(function(e){c.a.write(function(){Object(u.a)(".js-global-navigation__section--history",e).remove()})}),w=!1},x=function(e,t){return'<li class="inline-list__item">\n        <a href="/'.concat(e[0],'" class="button button--small button--tag button--secondary" data-link-name="').concat(t+1," | ").concat(e[1],'">').concat(e[1],"</a>\n    </li>")},B=function(){var e;if(!1!==j().showInMegaNav){w&&N();var t=E();t.length&&(e='<li class="global-navigation__section js-global-navigation__section--history" data-link-name="shortcuts">\n                        <span class="global-navigation__title global-navigation__title--history">recently visited</span>\n                        <ul class="global-navigation__children global-navigation__children--history">\n                            '.concat(t.map(x).join(""),'\n                            <a class="button button--small button--tag button--tertiary" href="/preferences" data-link-name="edit">edit these</a>\n                        </ul>\n                    </li>'),c.a.write(function(){S().prepend(e)}),w=!0)}},I=function(){return!1!==j().showInMegaNav},L=function(e){var t=j();t.showInMegaNav=e,t.showInMegaNav?B():N(),y(t)}},298:function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return m}),n.d(t,"a",function(){return g});var a=n(12),i=n(2),o=n.n(i),s=function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e]},r=function(e){return e<10?"0".concat(e):e},c=function(e,t){var n=new Date;return e&&e.valueOf()>n.valueOf()-1e3*(t||0)},u=function(e,t,n){var a,i={s:{short:["s"],med:["s ago"],long:[" second ago"," seconds ago"]},m:{short:["m"],med:["m ago"],long:[" minute ago"," minutes ago"]},h:{short:["h"],med:["h ago"],long:[" hour ago"," hours ago"]},d:{short:["d"],med:["d ago"],long:[" day ago"," days ago"]}};return i[e]?(a=i[e][t],1===n?a[0]:a[a.length-1]):""},l=function(e){return" ".concat(e.getHours(),":").concat(r(e.getMinutes()))},d=function(e){var t,n,a,i,o,r,c,d,m,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=new Date(Number(e)),h=new Date,p=g.format||"short",b="short"===g.format||"med"===g.format;return o=f,"[object Date]"===Object.prototype.toString.call(o)&&!Number.isNaN(o.getTime())&&!((i=parseInt((h.getTime()-f)/1e3,10))<0)&&!(g.notAfter&&i>g.notAfter)&&(i<55?i+u("s",p,i):i<3300?(t=Math.round(i/60))+u("m",p,t):function(e){var t=new Date;return e&&e.toDateString()===t.toDateString()}(f)||b&&function(e){var t=new Date;return e&&e.valueOf()>t.valueOf()-864e5}(f)?(n=Math.round(i/3600))+u("h",p,n):b&&function(e){var t=(new Date).valueOf()-6048e5;return e.valueOf()>=t}(f)?(a=Math.round(i/3600/24))+u("d",p,a):(c=f,d=new Date,(m=new Date).setDate(d.getDate()-1),c.toDateString()===m.toDateString()?"Yesterday".concat(l(f)):i<432e3?[(r=f.getDay(),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][r]),f.getDate(),s(f.getMonth()),f.getFullYear()].join(" ")+(g.showTime?l(f):""):[f.getDate(),s(f.getMonth()),f.getFullYear()].join(" ")+(g.showTime?l(f):"")))},m=function(e){var t="js-locale-timestamp",n=e||document;Object(a.a)(".".concat(t),n).each(function(e){var n,a=o()(e),i=parseInt(a.attr("data-timestamp"),10);i&&(n=new Date(i),e.innerHTML="".concat(r(n.getHours()),":").concat(r(n.getMinutes())),a.removeClass(t))})},g=function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(".js-timestamp, .js-item__timestamp").each(function(t){var n,a=o()(t),i=parseInt(a.attr("data-timestamp"),10)||a.attr("datetime"),s=new Date(i),r=d(s.getTime(),{showTime:o()(a.parent()).hasClass("block-time"),format:a.attr("data-relativeformat"),notAfter:e.notAfter});r?((n=a[0].querySelector(".timestamp__text")||a[0]).getAttribute("title")||n.setAttribute("title",o()(n).text()),n.innerHTML=r):e.notAfter&&a.addClass("modern-hidden")})})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),m()}},300:function(e,t,n){"use strict";n.d(t,"d",function(){return m}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return l});var a=n(5),i=n(16),o=n.n(i),s=[],r=Date.now(),c=function(e){s.push({name:e,status:"unfinished"})},u=function(e){s.filter(function(t){return t.name===e}).forEach(function(e){e.status="completed",e.endTime="".concat(Date.now()-r,"ms")})},l=function(e){s.filter(function(t){return t.name===e}).forEach(function(e){e.status="failed",e.endTime="".concat(Date.now()-r,"ms")})},d=function(){o.a.record({register:s})},m=function(){a.a.on("register:begin",c),a.a.on("register:end",u),a.a.on("register:error",l),window.setTimeout(d,5e3)}},326:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=new Promise(function(e){window.guardian.css.loaded?e():window.guardian.css.onLoad=e})},354:function(e,t,n){"use strict";var a=n(5),i=n(8),o=n(122),s=n(120),r=document.location,c=function(e){Object(o.c)(e)},u=function(e){if(e.validTarget)return e.target.hasAttribute("data-sponsor")?Object(o.f)(e.target):void(e.sameHost?e.samePage?function(e){e.tag&&Object(o.e)(e.target,e.tag)}(e):function(e){var t={path:r.pathname,tag:e.tag||"untracked",time:(new Date).getTime()};i.b.set("gu.analytics.referrerVars",t)}(e):function(e){Object(o.a)(e.target,e.tag)}(e))};t.a={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.location&&(r=e.location),a.a.on("module:clickstream:interaction",c),a.a.on("module:clickstream:click",function(e){Object(s.b)([["c-analytics",function(){u(e)}]])})},trackClick:u,trackNonClickInteraction:c}},355:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e,t){var n=parseInt(e,10);if(!Number.isNaN(n)){if(t&&n>9999){var a=Math.floor(n/1e3);return"".concat(a.toLocaleString(),"k")}return n.toLocaleString()}}},405:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var a=n(9),i=n.n(a),o=n(15),s=n.n(o),r=n(49),c=n.n(r),u=n(48),l=n.n(u),d=n(50),m=n.n(d),g=n(26),f=n.n(g),h=n(1),p=n.n(h),b=n(2),v=n.n(b),w=n(30),y=n(10),k=n(12),j=function(e){return'\n    <div class="score-container">\n        <div class="score__loading '.concat(e.loadingState,'">\n            <div class="loading__text">Fetching the scores…</div>\n            <div class="is-updating"></div>\n        </div>\n    </div>\n')},_=function(e){function t(e){var n;i()(this,t),n=c()(this,l()(t).call(this)),p()(f()(f()(n)),"placeholder",void 0),p()(f()(f()(n)),"pageType",void 0),p()(f()(f()(n)),"parent",void 0),Object.assign(f()(f()(n)),e);var a=j({loadingState:"report"!==n.pageType?" score__loading--live":""});return n.updateEvery=Object(y.m)({min:"desktop"})?30:60,n.placeholder=v.a.create(a)[0],"report"===n.pageType?e.parent.after(n.placeholder):e.parent.addClass("u-h").before(n.placeholder),n}return m()(t,e),s()(t,[{key:"prerender",value:function(){var e=Object(k.a)(".score__loading",Object(k.a)(this.placeholder));e.length&&e.remove()}},{key:"ready",value:function(){this.setState(this.pageType)}},{key:"load",value:function(){this.fetch(this.placeholder)}},{key:"loadFromJson",value:function(e){this.template=e,this.render(this.placeholder)}},{key:"error",value:function(){this.placeholder.innerHTML="",this.parent.removeClass("u-h")}}]),t}(w.a)},406:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(6),i=["tabs__tab--selected","tone-colour","tone-accent-border"],o=function(e){return a.a.read(function(){return e.getAttribute("href")})},s=function(e,t){var n=e.parentNode;return a.a.write(function(){n&&(n.setAttribute("aria-selected","false"),i.forEach(function(e){return n.classList.remove(e)})),t.classList.add("u-h")})},r=function(e,t){var n=e.parentNode;return a.a.write(function(){n&&(n.setAttribute("aria-selected","true"),i.forEach(function(e){return n.classList.add(e)})),t.classList.remove("u-h","modern-hidden"),t.focus()})},c=function(){return a.a.read(function(){return Array.from(document.querySelectorAll(".tabs"))}).then(function(e){e.forEach(function(e){var t=e.querySelector(".js-tabs");if(t&&"true"!==t.dataset.tabsInitialized)return a.a.write(function(){t.setAttribute("data-tabs-initialized","true")}),t.addEventListener("click",function(t){var n=t.target;if(n&&"A"===n.nodeName){t.preventDefault();var a=e.querySelector(".tabs__tab--selected a");o(n).then(function(t){if(t){var a=e.querySelector(t);a&&r(n,a)}}),a&&o(a).then(function(t){if(t){var i=e.querySelector(t);i&&n!==a&&s(a,i)}})}}),a.a.write(function(){t.setAttribute("data-tabs-initialized","true")})})})}},422:function(e,t,n){"use strict";var a=n(2),i=n.n(a),o=n(12),s=function(e){return o.a.create(document.createElementNS("http://www.w3.org/2000/svg",e))},r=function(e){return"translate(".concat(e.toString(),")")};n.d(t,"a",function(){return c});var c=function(){};c.prototype.render=function(e){var t=e.scrollWidth||e.getAttribute("data-chart-width"),n=Object(o.a)("th",e),a=Object(o.a)("td",e).map(function(e,t){return{label:n[t].innerHTML,value:parseInt(e.getAttribute("data-chart-value"),10),color:e.getAttribute("data-chart-color")}});i()(e).addClass("u-h");var c=new function(e,t){var n,a,i,c,u,l,d,m,g,f,h=Object.assign({percentCutout:35,unit:"",showValues:!1},t||{}),p=h.width,b=h.height||p,v=Math.min(b/2,p/2),w=v*(h.percentCutout/100),y=e.reduce(function(e,t){return{value:e.value+t.value}}).value,k=Math.PI/2,j=2*Math.PI,_=[p/2,b/2],O=p/2,C=b/2,E=o.a.create('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMinYMin" class="chart chart--doughnut"></svg>').attr({width:p,height:b,viewbox:"0 0 ".concat([p,b].join(" "))}),T=-k;return e.forEach(function(e){n=e.value/y*j,i=((a=T+n)-T)%j>Math.PI?1:0,c={start:{x:O+Math.cos(T)*v,y:C+Math.sin(T)*v},end:{x:O+Math.cos(a)*v,y:C+Math.sin(a)*v}},u={start:{x:O+Math.cos(a)*w,y:C+Math.sin(a)*w},end:{x:O+Math.cos(T)*w,y:C+Math.sin(T)*w}},l=(w+v)/2,d=(T+a)/2,m=["M",c.start.x,c.start.y,"A",v,v,0,i,1,c.end.x,c.end.y,"L",u.start.x,u.start.y,"A",w,w,0,i,0,u.end.x,u.end.y,"Z"],g=s("g").attr("class","chart__arc").append(s("path").attr({d:m.join(" "),fill:e.color})),f=s("text").attr("class","chart__label"),h.showValues?f.append(s("tspan").attr("class","chart__label-text").text(e.label).attr({x:0,dy:"0"})).append(s("tspan").attr("class","chart__label-value").text(e.value).attr({x:0,dy:".9em"})):f.text(e.label),f.attr({transform:r([Math.cos(d)*l+O,Math.sin(d)*l+C])}).appendTo(g),g.appendTo(E),T+=e.value/y*j}),E.append(s("text").attr("class","chart__unit").text(h.unit).attr({transform:r(_),dy:"0.4em"}))}(a,{showValues:"true"===e.getAttribute("data-chart-show-values"),unit:e.getAttribute("data-chart-unit"),width:t}),u=c.attr("class");return c.attr("class","".concat(u," ").concat(e.getAttribute("data-chart-class")||""))[0].outerHTML}},497:function(e,t){e.exports='<div class="js-breaking-news__item breaking-news__item" data-breaking-article-id="<%=id%>">\n    <div class="breaking-news__item-content">\n        <div class="breaking-news__item-header">\n            <em class="breaking-news__item-kicker">Breaking news</em>\n            <div class="breaking-news__item-headline"><%=headline%></div>\n        </div>\n        <div class="breaking-news__item-options">\n            <button class="js-breaking-news__item__close button button--tertiary u-faux-block-link__promote"\n                    aria-label="Dismiss"\n                    data-link-name="close button"><%=closeIcon%></button>\n        </div>\n    </div>\n    <a class="u-faux-block-link__overlay" href="/<%=id%>"></a>\n</div>\n'},596:function(e,t,n){"use strict";n.r(t);var a,i,o,s=n(11),r=n.n(s),c=n(0),u=n(3),l=n(5),d=n(28),m=n(120),g=n(8),f=function(){if(window.matchMedia){var e=window.matchMedia("print");e.addListener(function(){e.matches&&l.a.emit("module:clickstream:interaction","print")})}},h=n(354),p=n(300),b=n(9),v=n.n(b),w=n(15),y=n.n(w),k=n(1),j=n.n(k),_=n(31),O=n.n(_),C=function(){function e(t){v()(this,e),j()(this,"opts",void 0),j()(this,"data",void 0),j()(this,"timeoutId",void 0),this.opts=Object.assign({},{changeThreshold:10,isContent:!1,pageEl:document.body},t),this.data={page:{start:(new Date).getTime(),depth:0,duration:0},content:{depth:0}},this.init()}return y()(e,[{key:"setData",value:function(e){var t=this.opts["".concat(e,"El")];if(!t)return!1;var n,a=function(e){if(document.body){var t=window.innerHeight||document.body.clientHeight,n=e.getBoundingClientRect();return n.bottom<0||n.bottom<t?100:n.top>t?0:n.top>0?100/(n.height||1)*(t-n.top):100/(n.height||1)*(Math.abs(n.top)+t)}}(t);return!!(a&&a-this.data[e].depth>this.opts.changeThreshold)&&(this.data[e].depth=a,"number"==typeof this.data[e].duration&&(this.data[e].duration=(n=this.data[e].start,(new Date).getTime()-n)),!0)}},{key:"hasDataChanged",value:function(){var e=this.setData("page"),t=!!this.opts.isContent&&this.setData("content");(e||t)&&this.log()}},{key:"assertScrolling",value:function(){"number"==typeof this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(function(){l.a.emit("scrolldepth:inactive")},1e3)}},{key:"log",value:function(){l.a.emit("scrolldepth:data",this.data)}},{key:"init",value:function(){var e=this;l.a.on("window:throttledScroll",O()(function(){e.assertScrolling()},200)),l.a.on("scrolldepth:inactive",function(){e.hasDataChanged()}),l.a.on("module:clickstream:click",function(){e.hasDataChanged()})}}]),e}(),E=n(343),T=n(103),A=n(6),M=n(7),S=n(355),N=n(137),x=function(e){var t=e||document.body;return t?function(e){return A.a.read(function(){return Array.from(e.querySelectorAll("[".concat("data-discussion-id","]")))}).then(function(e){if(0!==e.length)return e.reduce(function(e,t){var n=t.getAttribute("data-discussion-id");return e[n]||(e[n]=[]),e[n].push(t),e},{})})}(t).then(function(e){if(e){var t="".concat("/discussion/comment-counts.json?shortUrls=").concat(function(e){return Object.keys(e).sort().join(",")}(e));return Object(M.a)(t,{mode:"cors"}).then(function(t){if(t&&t.counts)return function(e,t){var n=e.map(function(e){return t[e.id].map(function(t){return function(e,t){var n=e.dataset.discussionUrl||function(e){var t=e.getElementsByTagName("a")[0];return"".concat(t?t.pathname:"","#comments")}(e);if("true"===e.dataset.discussionClosed&&0===t)return Promise.resolve();var a=e.dataset.commentcountFormat||"",i=function(e,t){var n=e.url,a=e.icon,i=e.count;return"content"===t?'<a href="'.concat(n,'" data-link-name="Comment count" class="commentcount2 tone-colour" aria-label="').concat(i,' comments">\n                    <h3 class="commentcount2__heading">').concat(a,' <span class ="commentcount2__text u-h">Comments</span></h3>\n                    <span class="commentcount2__value tone-colour js_commentcount_actualvalue">').concat(i,"</span>\n                </a>"):'<a class="fc-trail__count fc-trail__count--commentcount" href="'.concat(n,'" data-link-name="Comment count" aria-label="').concat(i,' comments">').concat(a," ").concat(i,"</a>")}({url:n,icon:Object(N.a)("commentCount16icon",["inline-tone-fill"]),count:Object(S.a)(t,!0)||""},a),o=Array.from(e.getElementsByClassName("js-item__meta")),s=o.length?o:[e];return A.a.write(function(){s.forEach(function(e){e.insertAdjacentHTML("beforeend",i)}),e.removeAttribute("data-discussion-id"),e.classList.remove("u-h")})}(t,e.count)})});return Promise.all(n)}(t.counts,e)})}}):Promise.resolve()},B=n(36),I=n(34),L=n.n(I),P=n(10),D=n(12),R=n(2),U=n.n(R),q=n(4),G=n.n(q),H={classes:{container:"js-profile-nav",content:"js-profile-info",popup:"js-profile-popup",register:"js-profile-register",commentActivity:"js-comment-activity",action:"brand-bar__item--action"}},$=function(){function e(t){v()(this,e),j()(this,"dom",void 0),j()(this,"opts",void 0),this.opts=Object.assign({},{url:"https://profile.theguardian.com"},t),this.dom={},document.body&&(this.dom.container=document.body.getElementsByClassName(H.classes.container)[0],this.dom.container&&(this.dom.content=this.dom.container.getElementsByClassName(H.classes.content)[0])),document.body&&(this.dom.popup=document.body.getElementsByClassName(H.classes.popup)[0]),document.body&&(this.dom.register=document.body.getElementsByClassName(H.classes.register)[0]),document.body&&(this.dom.commentActivity=document.body.getElementsByClassName(H.classes.commentActivity)[0])}return y()(e,[{key:"init",value:function(){var e=Object(B.j)(),t=U()(this.dom.container),n=U()(this.dom.content),a=U()(this.dom.register),i=U()(this.dom.commentActivity);e&&(t.hasClass("is-signed-in")||G.a.write(function(){n.text(e.displayName),t.addClass("is-signed-in"),a.hide()}),i.removeClass("u-h"),i.attr("href","".concat(this.opts.url,"/user/id/").concat(e.id)))}}]),e}(),F=function(){function e(){var t=this;v()(this,e),j()(this,"gcsUrl",void 0),j()(this,"resultSetSize",void 0),A.a.read(function(){return Array.from(document.getElementsByClassName("js-search-toggle"))}).then(function(e){var n=c.a.get("switches.googleSearch"),a=c.a.get("page.googleSearchUrl"),i=c.a.get("page.googleSearchId");n&&a&&i&&e.length>0&&(t.gcsUrl="".concat(a,"?cx=").concat(i),t.resultSetSize="identity"===c.a.get("page.section")?3:10,e.forEach(function(e){var n=e.getAttribute("data-toggle");n&&(A.a.write(function(){e.setAttribute("role","button"),e.setAttribute("aria-controls","search-popup"),e.setAttribute("aria-haspopup","dialog")}),A.a.read(function(){return document.getElementsByClassName(n)[0]}).then(function(a){a&&r.a.on(e,"click",function(i){var o=function(t){var n=t;"Escape"===n.key&&(s(n),e.focus())},s=function(t){t.preventDefault(),e.classList.remove("is-active"),a.classList.add("is-off"),r.a.off(document,"click",c),document.removeEventListener("keyup",o)},c=function(e){for(var t=e.target,a=!1;t&&!a;)t&&t.classList&&(t.classList.contains(n)||t.classList.contains("gsq_a"))&&(a=!0),t=t&&t.parentElement;a||s(e)};setTimeout(function(){e.classList.contains("is-active")&&(a.focus(),r.a.on(document,"click",c),document.addEventListener("keyup",o))}),t.load(a),i.preventDefault()})}))}))})}return y()(e,[{key:"load",value:function(e){var t,n,a=this;A.a.read(function(){return{allSearchPlaceholders:Array.from(document.getElementsByClassName("js-search-placeholder")),searchPlaceholder:e.getElementsByClassName("js-search-placeholder")[0]}}).then(function(e){var i=e.allSearchPlaceholders,o=e.searchPlaceholder;o&&(i.forEach(function(e){e!==o&&A.a.write(function(){e.innerHTML=""})}),o.innerHTML||(A.a.write(function(){o&&(o.innerHTML='<div class="search-box" role="search">\n                            <gcse:searchbox></gcse:searchbox>\n                            </div>\n                            <div class="search-results" data-link-name="search">\n                            <gcse:searchresults webSearchResultSetSize="\'}'.concat(a.resultSetSize,'" linkTarget="_self"></gcse:searchresults>\n                            </div>'))}),r.a.on(o,"keydown",".gsc-input",function(){A.a.read(function(){var e=Object(D.a)(".gssb_c"),t=e.css("top"),n=Object(D.a)(window).scrollTop();A.a.write(function(){e.css({top:parseInt(t,10)+n,"z-index":"1030"})})})}),r.a.on(o,"click",".search-results",function(e){var t=e.target;"a"===t.nodeName.toLowerCase()&&(t.target="_self")}),(t=document.createElement("script")).async=!0,t.src=a.gcsUrl,n=document.getElementsByTagName("script")[0],A.a.write(function(){n.parentNode&&n.parentNode.insertBefore(t,n)})))})}}]),e}(),J=n(54),W=n.n(J),V=n(143),z=n(51),Y=n(404),K=n.n(Y),Q=function(){function e(t,n){v()(this,e),j()(this,"id",void 0),j()(this,"important",void 0),j()(this,"permanent",void 0),j()(this,"blocking",void 0),j()(this,"trackDisplay",void 0),j()(this,"type",void 0),j()(this,"position",void 0),j()(this,"siteMessageComponentName",void 0),j()(this,"siteMessageLinkName",void 0),j()(this,"siteMessageCloseBtn",void 0),j()(this,"prefs",void 0),j()(this,"widthBasedMessage",void 0),j()(this,"cssModifierClass",void 0),j()(this,"customJs",void 0),j()(this,"customOpts",void 0),j()(this,"$siteMessage",void 0),j()(this,"$siteMessageContainer",void 0),j()(this,"$siteMessageOverlay",void 0);var a=n||{};this.id=t,this.important=a.important||!1,this.permanent=a.permanent||!1,this.blocking=a.blocking||!1,this.trackDisplay=a.trackDisplay||!1,this.type=a.type||"banner",this.position=a.position||"bottom",this.siteMessageComponentName=a.siteMessageComponentName||"",this.siteMessageLinkName=a.siteMessageLinkName||"",this.siteMessageCloseBtn=a.siteMessageCloseBtn||"",this.prefs="messages",this.widthBasedMessage=a.widthBasedMessage||!1,this.cssModifierClass=a.cssModifierClass||"",this.customJs=a.customJs||V.a,this.customOpts=a.customOpts||{},this.$siteMessageContainer=Object(D.a)(".js-site-message"),this.$siteMessageOverlay=Object(D.a)(".js-site-message-overlay")}return y()(e,[{key:"show",value:function(e){var t=this;if(!this.$siteMessageContainer.hasClass("is-hidden")&&!this.important)return!1;if("top"===this.position){var n=document.body;if(!n)throw new Error("Missing <body>");var a=n.childNodes[0];if(!a)throw new Error("<body> is empty");n.insertBefore(this.$siteMessageContainer[0],a),this.$siteMessageContainer.addClass("site-message--on-top")}return Object(D.a)(".js-site-message-copy").html(e),this.blocking&&(Object(D.a)("body, html").addClass("is-scroll-blocked"),this.$siteMessageOverlay.removeClass("is-hidden"),this.$siteMessageOverlay[0].addEventListener("click",function(){t.$siteMessageContainer[0].focus()}),this.$siteMessageOverlay[0].addEventListener("focus",function(){t.$siteMessageContainer[0].focus()}),this.trapFocus()),this.cssModifierClass&&this.$siteMessageContainer.addClass("site-message--".concat(this.cssModifierClass)),this.$siteMessage=Object(D.a)(".js-site-message__message"),this.updateMessageOnWidth(),l.a.on("window:throttledResize",this.updateMessageOnWidth.bind(this)),this.siteMessageComponentName&&(this.$siteMessageContainer.attr("data-component",this.siteMessageComponentName),this.trackDisplay&&Object(p.a)(this.siteMessageComponentName)),this.siteMessageLinkName&&this.$siteMessageContainer.attr("data-link-name",this.siteMessageLinkName),this.siteMessageCloseBtn&&Object(D.a)(".site-message__close-btn",".js-site-message").attr("data-link-name",this.siteMessageCloseBtn),this.$siteMessageContainer.addClass("site-message--".concat(this.type)).addClass("site-message--".concat(this.id)),this.$siteMessageContainer.removeClass("is-hidden"),this.permanent?(this.$siteMessageContainer.addClass("site-message--permanent"),Object(D.a)(".site-message__close").addClass("is-hidden")):r.a.on(document,"click",".js-site-message-close",this.acknowledge.bind(this)),this.customJs(this.customOpts),"modal"===this.type&&this.bindModalListeners(),!0}},{key:"bindModalListeners",value:function(){r.a.on(document,"click",".js-site-message-inner",function(e){e.stopImmediatePropagation(),e.stopPropagation()}),r.a.on(document,"click",".js-site-message",this.acknowledge.bind(this))}},{key:"trapFocus",value:function(){var e=this.$siteMessageContainer[0],t=document.createElement("div");t.tabIndex=0,t.addEventListener("focus",function(){e.focus()}),e.append(t),e.focus()}},{key:"hide",value:function(){Object(D.a)("#header").removeClass("js-site-message"),this.$siteMessageContainer.addClass("is-hidden"),this.$siteMessageOverlay.addClass("is-hidden"),Object(D.a)("body, html").removeClass("is-scroll-blocked")}},{key:"remember",value:function(){if(!this.isRemembered()){var e=z.a.get(this.prefs)||[];e.push(this.id),z.a.set(this.prefs,K()(e))}}},{key:"isRemembered",value:function(){return(z.a.get(this.prefs)||[]).includes(this.id)}},{key:"acknowledge",value:function(){this.remember(),this.hide()}},{key:"updateMessageOnWidth",value:function(){this.widthBasedMessage&&this.$siteMessage&&this.$siteMessage.length&&this.updateMessageFromData(Object(P.m)({max:"tablet"})?"site-message-narrow":"site-message-wide")}},{key:"updateMessageFromData",value:function(e){if(this.$siteMessage){var t=this.$siteMessage.data(e);t&&this.$siteMessage&&this.$siteMessage.text(t)}}}]),e}(),X=function(e){var t=z.a.get("messages");return t&&t.includes(e)},Z=n(122),ee=n(16),te=n.n(ee),ne="email-sign-in-banner",ae=[{name:"Guardian Today UK",utm:"GU Today main NEW H categories"},{name:"Test Campaign",utm:"test1212"}],ie=function(e){return ae.find(function(t){return t.utm===e})},oe="".concat(ne," : display"),se="emailbanner.referrerEmail",re="https://".concat(c.a.get("page.host"),"/email-newsletters");"".concat(c.a.get("page.idUrl"),"/signin?returnUrl=").concat(c.a.get(re)),a=(new window.URLSearchParams(window.location.search).getAll("utm_campaign")||[""])[0],i=ie(a),o=z.a.get(se),i&&!o?z.a.set(se,{utm:i.utm,pv:1}):o&&i&&o.utm!==i.utm?(z.a.remove(se),z.a.set(se,{utm:i.utm,pv:1})):o&&z.a.set(se,W()({},o,{pv:o.pv+1}));var ce,ue,le,de,me={id:ne,show:function(){var e;e=oe,te.a.record({component:"first-pv-consent",value:e}),Object(Z.c)(e);var t=z.a.get(se)||{};if(!t||!t.utm)throw new Error("email-sign-in : wrong store format");var n=ie(t.utm);if(!n)throw new Error("email-sign-in missing campaign for utm (".concat(t.utm,")"));z.a.remove(se);var a=new Q(ne,{cssModifierClass:ne,trackDisplay:!0,siteMessageLinkName:ne,siteMessageComponentName:ne});return Promise.resolve(a.show('<div class="site-message--email-sign-in-banner-slide">\n        <h3 class="site-message--email-sign-in-banner-title">\n            Enjoying '.concat(n.name,'?\n         </h3>\n         <p class="site-message--email-sign-in-banner-text">\n            We want to help you find more newsletters you\'ll love. If you sign in we can suggest you newsletters tailored to your personal taste. And you can manage your preferences at any time.\n         </p>\n         <a data-link-name="').concat(ne,' : to-sign-in" data-link-name="').concat(ne,' : success" class="site-message--email-sign-in-banner-cta">\n            Sign in / Register\n         </a>\n         <p class="site-message--email-sign-in-banner-text">\n            Free. Takes a minute. \n         </p>\n    </div>')))},canShow:function(){var e;return Promise.resolve(!X(ne)&&c.a.get("switches.idEmailSignInUpsell",!1)&&(e=z.a.get(se)||{}).pv&&e.pv>=2)}},ge=n(177),fe=n.n(ge),he=function(e){return"".concat(c.a.get("page.mmaUrl"),"/banner/").concat(e,"?INTCMP=BANNER")},pe=function(){var e=new Date;e.setDate(e.getDate()+1),z.a.set("mmaActionRequiredBannerCanBeShownAgainAfter",e.toISOString())},be=function(e,t){return function(n){window.ga("".concat(c.a.get("googleAnalytics.trackers.editorial"),".send"),"event",e,t,n)}},ve=Object(T.a)(),we={id:"membership-action-required",show:function(){return ve?(e=ve,new Q("membership-action-required",{cssModifierClass:"membership-action-required",trackDisplay:!0,siteMessageLinkName:"membership-action-required",siteMessageComponentName:"membership-action-required",customJs:function(){var e=be("click","in page"),t=be("element view","internal");r.a.on(document,"click",".js-site-message-close",function(){e("membership action required | banner hidden"),e("mma action required | banner hidden | ".concat(ve||"?")),pe()}),r.a.on(document,"click",".js-mma-update-details-button",function(){e("membership action required | banner update details clicked"),e("mma action required | banner update details clicked | ".concat(ve||"?")),pe()}),t("membership action required | banner impression"),t("mma action required | banner impression | ".concat(ve||"?"))}}).show('<div class="site-message__copy-heading">\n            Action is needed on your Guardian account\n        </div>\n        <div class="site-message__copy-text">\n            Please review and update your details as&nbsp;soon&nbsp;as&nbsp;you&nbsp;can. Thank&nbsp;you.\n        </div>\n        <div class="site-message__copy-text">\n            <a class="button site-message__copy-button js-mma-update-details-button" href="'.concat(function(e){switch(e){case"contribution":return he("contributions");case"membership":case"digitalpack":return he(e);default:return"".concat(c.a.get("page.idUrl"),"/").concat(e,"/edit")}}(e),'">\n                Update details ').concat(fe.a.markup,"\n            </a>\n        </div>")),Promise.resolve(!0)):Promise.resolve(!1);var e},canShow:function(){var e=z.a.get("mmaActionRequiredBannerCanBeShownAgainAfter");return Promise.resolve(null!==ve&&Object(B.m)()&&!(e&&new Date(e)>new Date))}},ye=function(){Object(T.e)()&&(A.a.read(function(){return document.getElementsByClassName("js-become-member")}).then(function(e){e.length&&e[0].setAttribute("hidden","hidden")}),A.a.read(function(){return document.getElementsByClassName("js-subscribe")}).then(function(e){e.length&&e[0].classList.remove("brand-bar__item--split--last")}))},ke=n(148),je=n(296),_e=!1,Oe="#feedback__form input, #feedback__form textarea, #feedback__form button",Ce=function(){return{browser:window.navigator.userAgent,referrer:document.referrer,page:window.location,width:window.innerWidth,adBlock:_e,devicePixelRatio:window.devicePixelRatio,gu_u:Object(u.d)("GU_U"),payingMember:Object(u.d)("gu_paying_member"),abTests:(e=Object(je.c)(),t=Object.keys(e),0===t.length?"No tests running":t.map(function(t){var n=e[t];return"".concat(t,"=").concat(n.variant)}).join(", "))};var e,t},Ee=function(e){var t=e.target;D.a.forEachElement("#feedback-category > option",function(e){if("nothing"!==e.value){var t=document.getElementById(e.value);t&&t.classList.toggle("feedback__blurb--selected",e.selected)}}),D.a.forEachElement(Oe,function(e){e.disabled="nothing"===t.value})},Te=function(){return document.getElementById("feedback-category")?(P.a.then(function(e){_e=e}),e=document.getElementById("feedback__explainer"),t=document.getElementById("feedback-category"),D.a.forEachElement(".feedback__form",function(t){t.addEventListener("submit",function(){var t=!1;return D.a.forEachElement("#feedback__form input, #feedback__form textarea",function(e){""!==e.value&&(t=!0)}),t&&e&&(e.innerHTML="All fields must be filled to proceed"),!t})}),D.a.forEachElement(Oe,function(e){e.disabled=!0}),t&&t.addEventListener("change",Ee,!1),Object(M.a)("https://members-data-api.theguardian.com/user-attributes/me",{mode:"cors"}).then(function(e){return{basicInformation:Ce(),subscriptionInformation:e}}).catch(function(){return{basicInformation:Ce()}}).then(function(e){D.a.forEachElement("#feedback__form input[name=extra]",function(t){t.value=JSON.stringify(e,null,"  ")})})):Promise.resolve();var e,t},Ae=["sepia","grayscale","invert","contrast","saturate","opacity"],Me=function(){G.a.write(function(){Ae.forEach(function(e){var t,n,a;z.a.isOn(e)&&(t=e,n=document.body,a="".concat(t,"(100%)"),n&&Object.assign(n.style,{"-webkit-filter":a,filter:a}))})}),z.a.isOn("breuerMode")&&document.body&&document.body.classList.add("is-breuer-mode")},Se=n(25),Ne=n.n(Se),xe=function(e){var t=e.classList.contains("dropdown--active"),n=Array.from(e.getElementsByClassName("dropdown__content")),a=Array.from(e.getElementsByClassName("dropdown__button"));n.forEach(function(e){e.setAttribute("aria-hidden",(!t).toString())}),Ne()(n).concat(Ne()(a)).forEach(function(e){e.setAttribute("aria-expanded",t.toString())})},Be=function(e){G.a.write(function(){e.currentTarget.parentElement&&e.currentTarget.parentElement.classList.add("u-faux-block-link--hover")})},Ie=function(e){G.a.write(function(){e.currentTarget.parentElement&&e.currentTarget.parentElement.classList.remove("u-faux-block-link--hover")})},Le=function(){r.a.on(document.body,"mouseenter",".u-faux-block-link__overlay",Be),r.a.on(document.body,"mouseleave",".u-faux-block-link__overlay",Ie)},Pe=n(49),De=n.n(Pe),Re=n(48),Ue=n.n(Re),qe=n(50),Ge=n.n(qe),He=n(26),$e=n.n(He),Fe=n(27),Je=n(105),We=n.n(Je),Ve=n(104),ze=n.n(Ve),Ye=n(176),Ke=n.n(Ye),Qe=n(172),Xe=n.n(Qe),Ze='\n    <div id="banner-ticker" class="js-engagement-banner-ticker engagement-banner-ticker is-hidden">\n        \n        <div class="js-ticker-under-goal is-hidden">\n            <div class="js-ticker-so-far engagement-banner-ticker__so-far">\n                <div class="js-ticker-count engagement-banner-ticker__count">'.concat(Object(Fe.d)(),'0</div>\n                <div class="engagement-banner-ticker__count-label">contributed</div>\n            </div>\n            \n            <div class="js-ticker-goal engagement-banner-ticker__goal">\n                <div class="js-ticker-count engagement-banner-ticker__count">').concat(Object(Fe.d)(),'0</div>\n                <div class="engagement-banner-ticker__count-label">our goal</div>\n            </div>\n        </div>\n        \n        <div class="js-ticker-over-goal is-hidden">\n            <div class="engagement-banner-ticker__thankyou">\n                <div>Help us beat our goal - thank you</div>\n                <div>Please keep contributing into the new year</div>\n            </div>\n            \n            <div class="js-ticker-exceeded engagement-banner-ticker__exceeded">\n                <div class="js-ticker-count engagement-banner-ticker__count">').concat(Object(Fe.d)(),'0</div>\n                <div class="engagement-banner-ticker__count-label">contributed</div>\n            </div>\n        </div>\n        \n        <div class="engagement-banner-ticker__progress-container">\n            <div class="engagement-banner-ticker__progress">\n                <div class="js-ticker-filled-progress engagement-banner-ticker__filled-progress ticker__filled-progress-under"></div>\n            </div>\n            <div class="js-ticker-goal-marker engagement-banner-ticker__goal-marker is-hidden"></div>\n        </div>\n    </div>\n'),et=function(e){var t=P.b?Xe.a.markup:"";return'\n        <div class="engagement-banner__close">\n            <div class="engagement-banner__roundel">\n                '.concat(We.a.markup,'\n            </div>\n            <button class="button engagement-banner__close-button js-site-message-close js-engagement-banner-close-button" data-link-name="hide release message">\n                <span class="u-h">Close</span>\n                ').concat(ze.a.markup,'\n            </button>\n        </div>\n        <div class="engagement-banner__container">\n            <div class="engagement-banner__text">\n                ').concat(e.messageText).concat(e.ctaText,"\n                ").concat(e.hasTicker?Ze:"",'\n            </div>\n            <div class="engagement-banner__cta">\n                <button class="button engagement-banner__button" href="').concat(e.linkUrl,'">\n                    ').concat(e.buttonCaption).concat(Ke.a.markup,'\n                </button>\n                <div class="engagement-banner__payment-logos">\n                    <img\n                        src="').concat(c.a.get("images.acquisitions.paypal-and-credit-card",""),'"\n                        alt="PayPal and credit card"\n                    >\n                    ').concat(t,'\n                </div>\n            </div>\n        </div>\n        <a\n            class="u-faux-block-link__overlay"\n            target="_blank"\n            href="').concat(e.linkUrl,'"\n        ></a>\n    ')},tt=n(99),nt=n(14),at=n(61),it=n(144),ot=n.n(it),st={membershipEngagementBannerBlockUk:{urls:["/uk","/uk-news"],geolocation:"GB"},membershipEngagementBannerBlockUs:{urls:["/us","/us-news"],geolocation:"US"},membershipEngagementBannerBlockAu:{urls:["/au","/australia-news"],geolocation:"AU"}},rt=["Uk","Us","Au"].map(function(e){return"membershipEngagementBannerBlock".concat(e)}),ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.location.pathname,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(Fe.e)(),i=e.filter(function(e){return!!c.a.switches[e]}).map(function(e){return t[e]}).filter(function(e){return e.geolocation===a});return ot()(i.map(function(e){return e.urls})).includes(n)},ut=n(44),lt=n(47),dt=n(173),mt=n(35),gt=function(e){return Object(tt.c)().then(function(e){return function(e){var t=e&&e[0];if(!(t&&t.messageText&&t.ctaText&&t.buttonCaption&&t.linkUrl))throw new Error("Required data from the Google Doc was missing. Got row: ".concat(t));var n='<span class="engagement-banner__highlight"> '.concat(t.ctaText.replace(/%%CURRENCY_SYMBOL%%/g,Object(Fe.d)()),"</span>");return{messageText:t.messageText,ctaText:n,buttonCaption:t.buttonCaption,linkUrl:Object(at.a)(t.linkUrl),hasTicker:!1,campaignCode:"control_banner_from_google_doc",pageviewId:c.a.get("ophan.pageViewId","not_found"),products:["CONTRIBUTION","RECURRING_CONTRIBUTION"],isHardcodedFallback:!1,template:et,minArticlesBeforeShowingBanner:3,userCohort:"OnlyNonSupporters"}}(e)}).catch(function(e){return Object(nt.a)(new Error("Could not fetch control banner copy from Google Doc. ".concat(e.message,". Stack: ").concat(e.stack)),{feature:"engagement-banner"},!1),{messageText:"<strong>The Guardian is editorially independent &ndash;\n    our journalism is free from the influence of billionaire owners or politicians.\n    No one edits our editor. No one steers our opinion.</strong> And unlike many others, we haven’t put\n    up a paywall as we want to keep our journalism open and accessible. But the revenue we get from\n    advertising is falling, so we increasingly need our readers to fund our independent, investigative reporting.",ctaText:'<span class="engagement-banner__highlight"> Support The Guardian from as little as '.concat(Object(Fe.d)(),"1</span>"),buttonCaption:"Support The Guardian",linkUrl:Object(at.b)(),hasTicker:!1,campaignCode:"fallback_hardcoded_banner",pageviewId:c.a.get("ophan.pageViewId","not_found"),products:["CONTRIBUTION","RECURRING_CONTRIBUTION"],isHardcodedFallback:!0,template:et,minArticlesBeforeShowingBanner:3,userCohort:"OnlyNonSupporters"}}).then(function(t){return e&&!t.isHardcodedFallback?W()({},t,e.variantToRun.engagementBannerParams,{abTest:{name:e.id,variant:e.variantToRun.id},campaignCode:"".concat(e.id,"_").concat(e.variantToRun.id)}):t})},ft=function(e){e.hide(),z.a.set("engagementBannerLastClosedAt",(new Date).toISOString())},ht=function(e){var t,n=Array.isArray(e.messageText)?(t=e.messageText)[Object(ut.f)()%t.length]:e.messageText,a=e.ctaText,i=e.leadSentence,o=Object(lt.b)(W()({base:e.linkUrl,componentType:"ACQUISITIONS_ENGAGEMENT_BANNER",componentId:e.campaignCode,campaignCode:e.campaignCode},e.abTest?{abTest:e.abTest}:{})),s=e.buttonCaption,r={titles:e.titles,leadSentence:i,messageText:n,ctaText:a,linkUrl:o,buttonCaption:s,hasTicker:e.hasTicker};return e.template?e.template(r):et(r)},pt=function(e){return t=e,n=ht(e),!!new Q("engagement-banner",{siteMessageLinkName:"membership message",siteMessageCloseBtn:"hide",siteMessageComponentName:t.campaignCode,trackDisplay:!0,cssModifierClass:t.bannerModifierClass||"engagement-banner",customJs:function(){var e=this;r.a.on(document,"click",".js-engagement-banner-close-button",function(){return ft(e)})}}).show(n)&&(e.bannerShownCallback&&e.bannerShownCallback(),function(e){["INSERT","VIEW"].forEach(function(t){Object(lt.d)(W()({component:{componentType:"ACQUISITIONS_ENGAGEMENT_BANNER",products:e.products,campaignCode:e.campaignCode,id:e.campaignCode},action:t},e.abTest?{abTest:e.abTest}:{}))})}(e),e.hasTicker&&Object(dt.a)(".js-engagement-banner-ticker"),!0);var t,n},bt=n.n(mt)()(function(){return Object(je.a)().then(gt)}),vt=function(){return!c.a.get("switches.membershipEngagementBanner")||ct()?Promise.resolve(!1):bt().then(function(e){if(Object(ut.a)(e.minArticlesBeforeShowingBanner,e.userCohort)){var t=z.a.get("engagementBannerLastClosedAt");return t?function(e,t){return function(e){return Object(M.a)("/reader-revenue/contributions-banner-deploy-log/".concat(e),{mode:"cors"}).then(function(e){return e&&e.time})}(t).then(function(t){return new Date(t)>new Date(e)}).catch(function(e){return Object(nt.a)(new Error("Unable to get engagement banner deploy log: ".concat(e)),{feature:"engagement-banner"},!1),!1})}(t,Object(ut.e)(Object(Fe.e)())):Promise.resolve(!0)}return Promise.resolve(!1)})},wt={id:"engagement-banner",show:function(){return bt().then(pt).catch(function(e){return Object(nt.a)(new Error("Could not show banner. ".concat(e.message,". Stack: ").concat(e.stack)),{feature:"engagement-banner"},!1),!1})},canShow:vt},yt=n(153),kt=n.n(yt),jt=n(121),_t=n(167),Ot={heading:"Your privacy",consentText:["We use cookies to improve your experience on our site and to show you personalised advertising.",'To find out more, read our <a class="u-underline" data-link-name="first-pv-consent : to-privacy" href="'.concat("https://www.theguardian.com/help/privacy-policy",'">privacy policy</a> and <a class="u-underline" data-link-name="first-pv-consent : to-cookies" href="').concat("https://www.theguardian.com/info/cookies",'">cookie policy</a>.')],agreeButton:"I'm OK with that",choicesButton:"My options",linkToPreferences:"".concat(c.a.get("page.idUrl"),"/privacy-settings")},Ct="js-first-pv-consent-agree",Et=function(){return'\n    <div class="site-message--first-pv-consent__block site-message--first-pv-consent__block--head">'.concat(Ot.heading,'</div>\n    <div class="site-message--first-pv-consent__block site-message--first-pv-consent__block--intro">').concat(Ot.consentText.map(function(e){return"<p>".concat(e,"</p>")}).join(""),'\n    </div>\n    <div class="site-message--first-pv-consent__actions">\n        <button\n            data-link-name="first-pv-consent : agree"\n            class="site-message--first-pv-consent__button site-message--first-pv-consent__button--main ').concat(Ct,'"\n        >').concat(kt.a.markup,"<span>").concat(Ot.agreeButton,'</span></button>\n        <a\n            href="').concat(Ot.linkToPreferences,'"\n            data-link-name="first-pv-consent : to-prefs"\n            class="site-message--first-pv-consent__link u-underline"\n        >').concat(Ot.choicesButton,"</a>\n    </div>\n")},Tt=function(){return Promise.resolve(jt.a.some(function(e){return null===Object(jt.b)(e)})&&"EU"===(Object(u.d)("GU_geo_continent")||"OTHER").toUpperCase()&&!X("first-pv-consent"))},At=function(){var e;Object(_t.c)(),e="first-pv-consent : display",te.a.record({component:"first-pv-consent",action:e,value:e}),Object(Z.c)(e)},Mt=function(e){Array.from(document.querySelectorAll(".".concat(Ct))).forEach(function(t){t.addEventListener("click",function(){return function(e){jt.a.forEach(function(e){Object(jt.d)(e,!0)}),e.hide()}(e)})})},St={id:"first-pv-consent",canShow:Tt,show:function(){At();var e=new Q("first-pv-consent",{important:!0,permanent:!0,customJs:function(){Mt(e)}});return Promise.resolve(e.show(Et()))}},Nt=function(e){function t(e,n,a,i){var o;return v()(this,t),o=De()(this,Ue()(t).call(this,e,i)),j()($e()($e()(o)),"elementSelector",void 0),j()($e()($e()(o)),"parent",void 0),o.elementSelector=n,o.parent=a,o}return Ge()(t,e),y()(t,[{key:"hide",value:function(){var e=document.querySelector(this.elementSelector);if(e){var t=e.parentElement;e.remove(),t&&0===t.childElementCount&&t.remove()}this.parent.remember()}},{key:"bindCloseHandler",value:function(e){var t=this,n=document.querySelector(this.elementSelector);if(n){var a=n.querySelectorAll(".js-site-message-close");Array.prototype.forEach.call(a,function(n){n.addEventListener("click",function(){e(t)})})}}}]),t}(Q),xt=new Q("first-pv-consent-plus-engagement-banner"),Bt=new Nt("first-pv-consent",".js-first-pv-consent-site-message",xt),It=new Nt("engagement-banner",".js-engagement-banner-site-message",xt),Lt={id:"first-pv-consent-plus-engagement-banner",canShow:function(){return Promise.all([Tt(),vt()]).then(function(e){return e.every(function(e){return!0===e})})},show:function(){return At(),Object(je.a)().then(gt).then(function(e){return{params:e,html:ht(e)}}).then(function(e){return A.a.write(function(){var t,n=e.params.bannerModifierClass?"site-message--".concat(e.params.bannerModifierClass):"",a=(t=e.html,'\n    <div class="site-message js-site-message js-double-site-message site-message--banner site-message--double-banner" tabindex="-1" role="dialog" aria-label="welcome" aria-describedby="site-message__message" data-component="AcquisitionsEngagementBannerStylingTweaks_control">\n        <div class="js-engagement-banner-site-message '.concat(n,' site-message--engagement-banner">\n            <div class="gs-container">\n                <div class="site-message__inner js-site-message-inner">\n                    <div class="site-message__roundel">\n                        ').concat(We.a.markup,'\n                    </div>\n                    <div class="site-message__copy js-site-message-copy u-cf">\n                        ').concat(t,'\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="js-first-pv-consent-site-message site-message--first-pv-consent" tabindex="-1" data-link-name="release message" role="dialog" aria-label="welcome" aria-describedby="site-message__message">\n            <div class="gs-container">\n                <div class="site-message__inner js-site-message-inner">\n                    <div class="site-message__copy js-site-message-copy u-cf">\n                        ').concat(Et(),"\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n"));return document.body&&document.body.insertAdjacentHTML("beforeend",a),Mt(Bt),It.bindCloseHandler(ft),e.params.bannerShownCallback&&e.params.bannerShownCallback(),!0})}).catch(function(e){return Object(nt.a)(new Error("Could not show banner within double banner. ".concat(e.message,". Stack: ").concat(e.stack)),{feature:"engagement-banner"},!1),!1})}},Pt=n(298),Dt=n(133),Rt=n.n(Dt),Ut=n(326),qt={IOS:{LOGO:"https://assets.guim.co.uk/images/apps/ios-logo.png",SCREENSHOTS:"https://assets.guim.co.uk/images/apps/ios-screenshots.jpg",LINK:"https://app.adjust.com/w97upi?deep_link=gnmguardian://root?contenttype=front&source=adjust",STORE:"on the App Store"},ANDROID:{LOGO:"https://assets.guim.co.uk/images/apps/android-logo-2x.png",SCREENSHOTS:"https://assets.guim.co.uk/images/apps/ios-screenshots.jpg",LINK:"https://app.adjust.com/642i3r?deep_link=x-gu://www.theguardian.com/?source=adjust",STORE:"in Google Play"}},Gt=Object(u.d)("GU_SMARTAPPBANNER"),Ht=Gt&&!Number.isNaN(Gt)?parseInt(Gt,10):0,$t=Object(P.o)()?"ios":"android",Ft={id:$t,show:function(){return Ut.a.then(function(){var e=new Q($t,{position:"top"}),t='<img src="<%=LOGO%>" class="app__logo" alt="Guardian App logo" /><div class="app__cta"><h4 class="app__heading">The Guardian app</h4><p class="app__copy">Instant alerts. Offline reading.<br/>Tailored to you.</p><p class="app__copy"><strong>FREE</strong> – <%=STORE%></p></div><a href="<%=LINK%>" class="app__link">View</a>'+("mobile"===Object(P.d)()?"":'<img src="<%=SCREENSHOTS%>" class="app__screenshots" alt="screenshots" />');return e.show(Rt()(t)(qt[$t.toUpperCase()])),Object(u.a)("GU_SMARTAPPBANNER",String(Ht+1)),G.a.read(function(){var e=Object(D.a)(".site-message--ios, .site-message--android").dim().height;0!==window.scrollY&&window.scrollTo(window.scrollX,window.scrollY+e)}),!0})},canShow:function(){return new Promise(function(e){e(!(c.a.get("switches.smartAppBanner")&&"Safari"===P.f.browser&&Object(P.o)())&&(Object(P.o)()||Object(P.l)())&&Ht<4&&!X($t))})}},Jt=n(406),Wt=n(389),Vt=n(135),zt=function(e){e.preventDefault();var t=(new Date).getTime(),n=Array.from(document.querySelectorAll("img:not(.gu-image):not(.responsive-img)"));G.a.write(function(){n.forEach(function(e){e.setAttribute("data-pin-nopin","true")})}),Object(Vt.a)("".concat("https://assets.pinterest.com/js/pinmarklet.js","?r=").concat(t))},Yt=n(421),Kt=n(403),Qt=function(){if(Object(B.m)()&&document.documentElement){var e=document.documentElement.classList;e.add("id--signed-in"),e.remove("id--signed-out")}},Xt=function(){Object(m.b)([["i-css-class",Qt]])},Zt=n(18),en=n.n(Zt),tn=n(348),nn=n.n(tn),an=n(497),on=n.n(an),sn={sport:"sport",football:"sport"},rn=c.a.get("page"),cn=function(){g.a.set("gu.breaking-news.hidden",de)},un=function(e,t){de[e]=t,cn()},ln=function(e){return(e.collections||[]).filter(function(e){return Array.isArray(e.content)&&e.content.length}).map(function(e){return e.href=(e.href||"").toLowerCase(),e})},dn=function(e){var t=(rn.edition||"").toLowerCase(),n=sn[rn.section];return ot()([e.filter(function(e){return"global"===e.href}).map(function(e){return e.content}),e.filter(function(e){return e.href===t}).map(function(e){return e.content}),e.filter(function(e){return n&&e.href===n}).map(function(e){return e.content})])},mn=function(e){return de[rn.pageId]=!0,de=nn()(de,function(t,n){return e.some(function(e){return e.id===n})}),cn(),e},gn=function(e){return e.filter(function(e){return!0!==de[e.id]})},fn=function(e){return e.filter(function(e){var t=e.frontPublicationDate;return t&&Object(Pt.b)(new Date(t),1200)})},hn=function(e){return e.sort(function(e,t){return t.frontPublicationDate-e.frontPublicationDate})[0]},pn={id:"breakingNewsBanner",show:function(){var e=U()(document.body),t=U()(en()(".js-breaking-news-placeholder")),n=de.hasOwnProperty(le.id)?0:3e3;t.append(function(e){e.closeIcon=Object(N.a)("closeCentralIcon");var t=U.a.create(Rt()(on.a)(e)),n=Object(D.a)(".js-breaking-news__item__close",t)[0];return n&&r.a.on(n,"click",function(){var t;G.a.write(function(){Object(D.a)("[data-breaking-article-id]").hide()}),t=e.id,un(t,!0)}),t}(le));var a=function(e){return U()(U.a.create(e[0])).addClass("breaking-news--spectre").removeClass("breaking-news--fade-in breaking-news--hidden")}(t);return setTimeout(function(){G.a.write(function(){var i;0===n&&t.removeClass("breaking-news--fade-in"),e.append(a),t.removeClass("breaking-news--hidden"),i=le.id,un(i,!1)})},n),Promise.resolve(!0)},canShow:function(){return g.a.isAvailable()?(de=g.a.get("gu.breaking-news.hidden")||{},Object(M.a)("/news-alert/alerts",{mode:"cors"}).then(ln).then(dn).then(mn).then(gn).then(fn).then(hn).then(function(e){return!!e&&(le=e,!0)}).catch(function(e){return Object(nt.a)(e,{feature:"breaking-news"}),!1})):Promise.resolve(!1)}},bn=c.a.get("images.acquisitions.ad-free",""),vn={id:"ad-free-banner",show:function(){return new Q("ad-free-banner",{siteMessageLinkName:"ad-free-banner",siteMessageCloseBtn:"hide",trackDisplay:!0,cssModifierClass:"ad-free-banner",customJs:function(){var e=this;r.a.on(document,"click",".js-ad-free-banner-dismiss-button",function(){e.acknowledge()})}}).show('\n        <div class="site-message__copy-text">\n            <h2 class="site-message__copy-heading">No ads, no interruptions</h2>\n            <p>As a valued subscriber, you won’t see adverts while logged in to the Guardian. Thank you for your support.</p>\n            <button data-link-name="ad-free-banner : dismiss" class="button site-message__copy-button js-ad-free-banner-dismiss-button">\n                '.concat(kt.a.markup,' Got it, thanks\n            </button>\n        </div>\n        <div class="site-message__image">\n            <img src="').concat(bn,'" alt="" />\n        </div>\n    ')),Promise.resolve(!0)},canShow:function(){return Promise.resolve(!X("ad-free-banner")&&Object(T.d)()&&c.a.get("switches.scAdFreeBanner",!1))}},wn=n(64),yn=n(388),kn=n(319),jn=n(311),_n=function(e){if(Object(ut.h)())alert('This page has "Prevent membership/contribution appeals" ticked in Composer. Please try a different page');else if(T.f.forEach(function(e){return Object(u.e)(e)}),Object(yn.e)(),Object(kn.a)(),Object(wn.a)(),e&&Object(T.c)(),Object(B.m)()&&!e)if(window.location.origin.includes("localhost"))Object(u.e)("GU_U");else{var t=window.location.origin.replace(/(www\.|m\.)/,"profile.");window.location.assign("".concat(t,"/signout"))}else window.location.reload()},On=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_n(e)},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c.a.get("switches.membershipEngagementBanner")?ct()?alert("Banner is blocked by a switch in the dotcom switchboard"):(z.a.remove("engagementBannerLastClosedAt"),g.a.set("gu.alreadyVisited",4),_n(e)):alert("Membership engagement banner switch is turned off on the dotcom switchboard")},En=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(u.a)("GU_geo_continent","EU"),Object(u.e)(jn.d),Cn(e)},Tn=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(yn.d)(),_n(e)},An=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(yn.a)(),_n(e)},Mn=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=window.prompt("Enter two-letter geolocation code (e.g. GB, US, AU). Current is ".concat(Object(Fe.e)(),"."));t&&(Object(Fe.g)(t),_n(e))},Sn=function(){window.guardian.readerRevenue={showMeTheEpic:On,showMeTheBanner:Cn,showMeTheDoubleBanner:En,showNextVariant:Tn,showPreviousVariant:An,changeGeolocation:Mn}};n.d(t,"init",function(){return ta});var Nn=function(){var e=document.getElementById("header");new F,e&&c.a.get("switches.idProfileNavigation")&&new $({url:c.a.get("page.idUrl")}).init()},xn=function(){!function(){r.a.on(document,"click",".js-navigation-toggle",function(e){var t=Object(D.a)(".".concat(e.currentTarget.getAttribute("data-target-nav")));e.preventDefault(),A.a.write(function(){t.toggleClass("navigation-container--expanded navigation-container--collapsed"),l.a.emit(t.hasClass("navigation-container--expanded")?"modules:nav:open":"modules:nav:close")})});var e,t=[A.a.write(function(){Object(D.a)(".navigation-container--default").removeClass("navigation-container--default").addClass("navigation-container--collapsed")}),A.a.read(function(){return Object(D.a)(".js-mega-nav")}).then(function(t){return e=t,A.a.read(function(){return Object(D.a)(".js-mega-nav-placeholder")})}).then(function(t){var n=D.a.create(e.html());if(Object(D.a)(".global-navigation",n).addClass("global-navigation--top"),t)return A.a.write(function(){t.append(n)})}),A.a.read(function(){return Object(D.a)(".js-navigation-header .js-navigation-toggle")}).then(function(e){return A.a.write(function(){e.attr("href","#nav-allsections")})})];Object(P.o)()&&"object"===L()(P.f)&&parseInt(P.f.version,10)>5&&t.push(A.a.read(function(){return Object(D.a)(".navigation__scroll")}).then(function(e){if(e)return A.a.write(function(){e.css({"-webkit-overflow-scrolling":"touch"})})})),Promise.all(t)}()},Bn=function(){["modules:popular:loaded","modules:geomostpopular:ready"].forEach(function(e){l.a.on(e,Jt.a)})},In=function(){var e=new Wt.a;e.init(),e.reset(),r.a.on(document.body,"click",".".concat("dropdown__button"),function(e){var t=e.currentTarget.closest(".dropdown");t&&A.a.read(function(){var e=document.documentElement,n=t.querySelector(".".concat("dropdown__content"));return{content:n,isActive:t.classList.contains("dropdown--active"),isAnimated:t.classList.contains("dropdown--animated")&&null!=e&&!1===e.classList.contains("disable-flashing-elements"),contentEstimatedHeight:void 0!==n.offsetHeight&&n.offsetHeight<window.innerHeight?n.offsetHeight:window.innerHeight}}).then(function(e){var n=e.content,a=e.isActive,i=e.isAnimated,o=e.contentEstimatedHeight;i&&"ontransitionend"in window?A.a.write(function(){t.style.pointerEvents="none",a||t.classList.toggle("dropdown--active"),n.style.height=a?"".concat(o,"px"):0}).then(function(){requestAnimationFrame(function(){n.style.height=a?0:"".concat(o,"px"),r.a.one(n,"transitionend",function(){A.a.write(function(){n.style.height="auto",t.style.pointerEvents="all",a&&t.classList.toggle("dropdown--active"),xe(t)})})})}):A.a.write(function(){t.classList.toggle("dropdown--active"),xe(t)})})})},Ln=function(){Object(Pt.a)()},Pn=function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ce=e.location||window.location,ue=e.filter||[],r.a.add(document.body,"click",function(e){var t=function e(t,n){if(!t.el)return!1;var a=t.el,i=a.tagName.toLowerCase(),o=a.getAttribute("data-link-name");if(o&&t.tags.unshift(o),"body"===i)return t.tag=t.tags.join(" | "),delete t.el,t.validTarget&&a.getAttribute("data-link-test")&&(t.tag="".concat(a.getAttribute("data-link-test")||""," | ").concat(t.tag||"")),t;var s,r=JSON.parse(a.getAttribute("data-custom-event-properties")||"{}");if(t.customEventProperties=Object.assign(r,t.customEventProperties),!t.validTarget&&(t.validTarget=(s=i,ue.filter(function(e){return e===s})).length>0||!!n,t.validTarget)){var c=a.getAttribute("href");t.target=a,t.samePage=c&&c.startsWith("#")||"button"===i||!!a.hasAttribute("data-is-ajax"),t.sameHost=t.samePage||!!c&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e.startsWith("mailto:"))return!1;var t=e.match(/:\/\/(.[^\/]+)/);return!t||t[1]===ce.hostname}(c)}return!t.linkContext&&a.getAttribute("data-link-context-path")&&(t.linkContextPath=a.getAttribute("data-link-context-path")||"",t.linkContextName=a.getAttribute("data-link-context-name")||""),t.el=a.parentNode,e(t)}({el:e.target,tags:[],target:e.target});l.a.emit("module:clickstream:click",t)})}({filter:["a","button"]})},Dn=function(){h.a.init(),c.a.get("switches.ophan")&&c.a.get("switches.scrollDepth")&&(l.a.on("scrolldepth:data",te.a.record),new C({isContent:/Article|LiveBlog/.test(c.a.get("page.contentType"))}))},Rn=function(){Object(u.c)(["mmcore.pd","mmcore.srv","mmid","GU_ABFACIA","GU_FACIA","GU_ALPHA","GU_ME","at","gu_join_date"])},Un=function(){["gu.subscriber","gu.contributor","gu.cachedRecommendations","gu.recommendationsEnabled","gu.abb3.exempt"].forEach(function(e){return g.a.remove(e)})},qn=function(){var e=c.a.get("page");e&&("Network Front"!==e.contentType&&Object(ke.e)(e),Object(ke.d)(e))},Gn=function(){c.a.get("switches.historyTags")&&l.a.once("modules:nav:open",function(){Object(ke.f)()})},Hn=function(){c.a.get("switches.idCookieRefresh")&&function(){if(g.a.isAvailable()&&Object(B.m)()){var e=(new Date).getTime();(function(e,t){return!e||t>parseInt(e,10)+2592e6})(g.a.get("identity.lastRefresh"),e)&&(Object(B.i)(),g.a.set("identity.lastRefresh",e))}}()},$n=function(){["orientationchange"].forEach(function(e){window.addEventListener(e,l.a.emit.bind(l.a,"window:".concat(e)))})},Fn=function(){if(window.self!==window.top){var e=document.documentElement;e&&e.classList.add("iframed")}},Jn=function(){"#nfn"===document.location.hash&&g.a.set("nfn",!0),"#nnfn"===document.location.hash&&g.a.remove("nfn"),g.a.get("nfn")&&n.e(40).then(n.bind(null,624)).then(function(e){(0,e.go)()})},Wn=function(){Object(p.d)()},Vn=function(){c.a.get("switches.enableDiscussionSwitch")&&(l.a.on("modules:related:loaded",x),x())},zn=function(){var e=Object(d.d)();e.test&&Object(u.b)("GU_TEST",encodeURIComponent(e.test))},Yn=function(){var e,t=document.body;t&&(r.a.on(t,"click","[data-open-overlay-on-click]",function(n){var a=n.currentTarget.getAttribute("data-open-overlay-on-click");e=t.scrollTop,t.classList.add("has-overlay");var i=document.getElementById(a);i&&(i.classList.add("overlay--open"),t.appendChild(i))}),r.a.on(t,"click",".js-overlay-close",function(n){var a=n.target.closest(".overlay");a&&a.classList.remove("overlay--open"),t.classList.remove("has-overlay"),window.setTimeout(function(){e&&(t.scrollTop=e,e=null)},1)}))},Kn=function(){window.guardian.api={}},Qn=function(){var e;/Article|LiveBlog|Gallery|Video/.test(c.a.get("page.contentType"))&&(e=Array.from(document.querySelectorAll(".social__item--pinterest")),G.a.write(function(){e.forEach(function(e){e.addEventListener("click",zt)})}))},Xn=function(){Object(Yt.a)(),c.a.get("switches.emailInArticle")&&Object(Kt.b)(),Array.from(document.getElementsByClassName("js-email-sub__iframe")).forEach(function(e){var t=e;Object(Yt.a)(t)}),r.a.on(window,"interactive-loaded",function(){Array.from(document.querySelectorAll(".guInteractive .js-email-sub__iframe")).forEach(function(e){var t=e;Object(Yt.a)(t)})})},Zn=function(){var e,t;e=[Lt,St,pn,we,wt,Ft,vn,me],t=new Array(e.length).fill("pending",0),new Promise(function(n){var a=!1;e.forEach(function(i,o){var s=function(i){t[o]=i;var s,r=(s=t.findIndex(function(e){return!0===e}))<=0?s:-1===t.slice(0,s).findIndex(function(e){return"pending"===e})?s:-1;if(!a&&-1!==r){var c=e[r];c.show(),a=!0;var u={component:"banner-picker",value:c.id};te.a.record(u)}t.includes("pending")||n()},r=!1,c=setTimeout(function(){r=!0,s(!1);var e={component:"banner-picker-timeout",value:i.id};te.a.record(e)},2e3);i.canShow().then(function(e){r||(clearTimeout(c),s(e))})})})},ea=function(){return Object(_t.b)(Object(jt.c)())},ta=function(){Object(m.b)([["c-analytics",Dn],["c-consent-cookie-tracking",ea],["c-identity",Xt],["c-adverts",E.b],["c-discussion",Vn],["c-test-cookie",zn],["c-event-listeners",$n],["c-block-link",Le],["c-iframe",Fn],["c-normalise",Jn],["c-tabs",Bn],["c-top-nav",Nn],["c-init-nav",xn],["c-toggles",In],["c-dates",Ln],["c-clickstream",Pn],["c-history",qn],["c-id-cookie-refresh",Hn],["c-history-nav",Gn],["c-start-register",Wn],["c-cookies",Rn],["c-localStorage",Un],["c-overlay",Yn],["c-public-api",Kn],["c-tech-feedback",Te],["c-media-listeners",f],["c-accessibility-prefs",Me],["c-pinterest",Qn],["c-email",Xn],["c-user-features",T.g],["c-membership",ye],["c-banner-picker",Zn],["c-reader-revenue-dev-utils",Sn]])}},633:function(e,t,n){"use strict";n.r(t);var a=n(25),i=n.n(a),o=n(6),s=n(18),r=n.n(s),c=n(19),u=n(12),l=n(0),d=n(46),m=n(120),g=n(296),f=n(30),h=n(10),p=n(422),b=n(353),v=n(405),w=n(133),y=n.n(w),k=function(e){0===e.filter(function(e){return e&&!1===e.ready}).length&&Object(b.a)(function(){Object(u.a)(".js-after-article").append(u.a.create('<div class="football-extras"></div>').each(function(t){e.forEach(function(e){t.appendChild(e.content)})}))},function(){e.forEach(function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Object(u.a)(".js-components-container");u.a.create('<div class="'.concat("component--rhc",'" data-importance="').concat(t,'"></div>')).append(e).each(function(e){var a=Object(u.a)(".".concat("component--rhc"),n[0])||[],i=Array.from(a).filter(function(e){return!e.hasAttribute("data-importance")||t>parseInt(e.getAttribute("data-importance"),10)});0===i.length?n.append(e):Object(u.a)(i[0]).before(e)})}(e.content,e.importance)})})},j=function(){!function(){var e=l.a.get("page.cricketMatchDate"),t=l.a.get("page.cricketTeam");if(e&&t){var n=new f.a;n.endpoint="/sport/cricket/match/".concat(e,"/").concat(t,".json"),o.a.read(function(){return document.querySelector(".js-cricket-score")}).then(function(e){n.fetch(e,"summary")})}}(),function(){var e="";if(l.a.get("page.isLiveBlog")?e="minbymin":l.a.hasTone("Match reports")&&(e="report"),l.a.get("page.rugbyMatch")&&e){var t=encodeURIComponent(l.a.get("page.pageId")),n=new v.a({pageType:e,parent:Object(u.a)(".js-score"),autoupdated:l.a.get("page.isLive"),responseDataKey:"matchSummary",endpoint:"".concat(l.a.get("page.rugbyMatch"),".json?page=").concat(t)});n.fetched=function(e){o.a.read(function(){return document.querySelector(".content--liveblog")}).then(function(e){e.classList.add("content--liveblog--rugby")}),u.a.create(e.nav).first().each(function(e){2===Object(u.a)(".tabs__tab",e).length&&(Object(u.a)(".js-sport-tabs").empty(),Object(u.a)(".js-sport-tabs").append(e))});var t=e.scoreEvents;if(Object(h.m)({max:"mobile"})){var n=u.a.create(y()(e.dropdown)({name:"Score breakdown",content:t}));l.a.get("page.isLiveBlog")&&n.addClass("dropdown--key-events"),n.addClass("dropdown--active"),Object(u.a)(".js-after-article").append(n)}else{var a=u.a.create(t);a.addClass("hide-on-mobile"),Object(u.a)(".rugby-stats").remove(),Object(u.a)(".score-container").after(a)}Object(u.a)(".js-match-stats").remove(),u.a.create('<div class="match-stats__container js-match-stats">'.concat(e.matchStat,"</div>")).each(function(e){Object(u.a)(".js-chart",e).each(function(e){(new p.a).render(e)}),k([{name:"Match stats",importance:3,content:e,ready:!0}])}),Object(u.a)(".js-football-table").remove(),u.a.create('<div class="js-football-table" data-link-name="football-table-embed">'.concat(e.groupTable,"</div>")).each(function(e){k([{name:"Table",importance:3,content:e,ready:!0}])})},n.load()}}()},_=n(122),O=n(27),C=n(54),E=n.n(C),T=n(47),A=n(61),M=["https://interactive.guim.co.uk/embed/2017/12/the-mother-load/","https://interactive.guim.co.uk/embed/2018/this-wide-brown-land/"],S=function(){window.addEventListener("message",function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}"enrich-acquisition-links"===t.type&&t.id&&(t.referrerData=Object(T.a)({}),Array.from(document.getElementsByTagName("iframe")).forEach(function(e){e.contentWindow.postMessage(JSON.stringify(t),"https://interactive.guim.co.uk")})),"acquisition-data-request"===t.type&&Array.from(document.getElementsByTagName("iframe")).forEach(function(e){var t=e.getAttribute("src");t&&function(e){return M.some(function(t){return e.startsWith(t)})}(t)&&e.contentWindow.postMessage(JSON.stringify({type:"acquisition-data-response",acquisitionData:E()({},Object(T.a)({}),{source:"GUARDIAN_WEB"})}),"*")})}),Array.from(document.getElementsByClassName("js-acquisition-link")).forEach(function(e){var t=e.getAttribute("href");if(t){var n=function(e){var t,n;try{t=new URL(e)}catch(t){return e}try{var a=t.searchParams.get("acquisitionData");if(!a)return e;n=JSON.parse(a)}catch(t){return e}return n&&(n=Object(T.a)(n),t.searchParams.set("acquisitionData",JSON.stringify(n))),t.toString()}(t);n=Object(A.a)(n),e.setAttribute("href",n)}})};n.d(t,"bootEnhanced",function(){return N});var N=function(){var e=function(e,t){c.a.context({tags:{feature:e}},t,[])};Object(d.c)("App Begin"),Object(m.b)([["ga-user-timing-enhanced-start",function(){Object(_.d)("Javascript Load","enhancedStart","Enhanced start parse time")}],["ab-tests",function(){Object(m.b)([["ab-tests-run",function(){Object(g.e)()}]])}],["enrich-acquisition-links",S]]),Promise.resolve().then(n.bind(null,596)).then(function(t){var n=t.init;e("common",n)}).then(function(){if(Object(m.b)([["geolocation",O.f]]),l.a.get("page.isFront")&&Promise.all([n.e(7),n.e(18)]).then(function(t){e("facia",n(629).init)}.bind(null,n)).catch(n.oe),"Article"!==l.a.get("page.contentType")||l.a.get("page.isMinuteArticle")||Promise.all([n.e(2),n.e(0),n.e(1)]).then(function(t){e("article",n(630).init),e("article : lightbox",n(618).init)}.bind(null,n)).catch(n.oe),"Crossword"===l.a.get("page.contentType")&&Promise.all([n.e(3),n.e(0),n.e(13)]).then(function(t){e("crosswords",n(628).init)}.bind(null,n)).catch(n.oe),"LiveBlog"===l.a.get("page.contentType")&&Promise.all([n.e(2),n.e(0),n.e(1)]).then(function(t){e("liveBlog",n(634).init),e("liveBlog : lightbox",n(618).init)}.bind(null,n)).catch(n.oe),l.a.get("page.isMinuteArticle")&&Promise.all([n.e(2),n.e(0),n.e(1)]).then(function(t){e("articleMinute",n(637).init),e("article : lightbox",n(618).init)}.bind(null,n)).catch(n.oe),"Audio"!==l.a.get("page.contentType")&&"Video"!==l.a.get("page.contentType")&&"Interactive"!==l.a.get("page.contentType")||Promise.all([n.e(2),n.e(0),n.e(1)]).then(function(t){e("media : trail",n(335).initTrails)}.bind(null,n)).catch(n.oe),o.a.read(function(){return r()("".concat(l.a.get("switches.videojs")?"video, ":""," audio"))}).then(function(t){t.length&&Promise.all([n.e(32),n.e(21)]).then(function(t){e("media-player",n(636).initMediaPlayer)}.bind(null,n)).catch(n.oe)}),l.a.get("switches.videojs")||o.a.read(function(){return r()("video")}).then(function(t){t.length&&n.e(36).then(function(t){e("video-player",n(212).initVideoPlayer)}.bind(null,n)).catch(n.oe)}),"Gallery"===l.a.get("page.contentType")&&Promise.all([n.e(2),n.e(0),n.e(1)]).then(function(t){e("gallery",n(619).init),e("gallery : lightbox",n(618).init)}.bind(null,n)).catch(n.oe),"ImageContent"===l.a.get("page.contentType")&&Promise.all([n.e(2),n.e(0),n.e(1)]).then(function(t){e("image-content : lightbox",n(618).init),e("image-content : trail",n(335).initTrails)}.bind(null,n)).catch(n.oe),"football"===l.a.get("page.section")&&n.e(19).then(function(t){e("football",n(631).init)}.bind(null,n)).catch(n.oe),"sport"===l.a.get("page.section")&&e("sport",j),"identity"===l.a.get("page.section")&&Promise.all([n.e(3),n.e(25)]).then(function(t){e("profile",n(627).initProfile)}.bind(null,n)).catch(n.oe),l.a.get("page.isPreferencesPage")&&Promise.all([n.e(3),n.e(5)]).then(function(t){e("preferences",n(620).init)}.bind(null,n)).catch(n.oe),"newsletter-signup-page"===l.a.get("page.section")&&n.e(23).then(function(t){e("newsletters",n(621).init)}.bind(null,n)).catch(n.oe),"https:"===window.location.protocol&&"identity"!==l.a.get("page.section")||window.location.hash.indexOf("force-sw")>-1){var t=window.navigator;t&&t.serviceWorker&&(l.a.get("switches.serviceWorkerEnabled")?t.serviceWorker.register("/service-worker.js"):t.serviceWorker.getRegistrations().then(function(e){i()(e).forEach(function(e){e.unregister()})}))}"help/accessibility-help"===l.a.get("page.pageId")&&Promise.all([n.e(3),n.e(5)]).then(function(t){e("accessibility",n(622).init)}.bind(null,n)).catch(n.oe),o.a.read(function(){Object(u.a)(".youtube-media-atom").length>0&&n.e(38).then(function(t){e("youtube",n(213).init)}.bind(null,n)).catch(n.oe)}),window.location.hash.includes("experiments")&&n.e(16).then(function(t){e("experiments",n(623).showExperiments)}.bind(null,n)).catch(n.oe),"Audio"===l.a.get("page.contentType")&&Promise.all([n.e(30),n.e(9)]).then(function(t){e("audio",n(632).init)}.bind(null,n)).catch(n.oe),Object(d.c)("App End"),Object(m.b)([["ga-user-timing-enhanced-end",function(){Object(_.d)("Javascript Load","enhancedEnd","Enhanced end parse time")}]])})}}}]);
//# sourceMappingURL=graun.enhanced.js.map